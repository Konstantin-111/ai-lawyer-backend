const express = require('express');
const cors = require('cors');
const https = require('https');
const http = require('http');
const OpenAI = require('openai');
require('dotenv').config();

const app = express();
const PORT = process.env.PORT || 3000;

// Middleware
app.use(cors());
app.use(express.json({ limit: '10mb' }));

// OpenAI Client
const openai = new OpenAI({
  apiKey: process.env.OPENAI_API_KEY,
});

const ASSISTANT_ID = process.env.ASSISTANT_ID;

// =============================================================================
// ğŸ’° Ğ¢ĞĞ‘Ğ›Ğ˜Ğ¦Ğ Ğ¨Ğ¢Ğ ĞĞ¤ĞĞ’ Ğ˜Ğ— ĞšĞĞĞŸ Ğ Ğ¤ (Ñ„Ğ¸ĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ ÑÑƒĞ¼Ğ¼Ñ‹)
// =============================================================================
const FINES_TABLE = {
  // Ğ¡Ñ‚Ğ°Ñ‚ÑŒÑ 13.11 ĞšĞ¾ĞĞŸ Ğ Ğ¤ - ĞĞ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ğµ Ğ·Ğ°ĞºĞ¾Ğ½Ğ¾Ğ´Ğ°Ñ‚ĞµĞ»ÑŒÑÑ‚Ğ²Ğ° Ğ¾ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
  // ĞĞĞ’Ğ«Ğ• ÑˆÑ‚Ñ€Ğ°Ñ„Ñ‹ (Ñ 30.05.2025) - Ğ¤Ğ— â„–420-Ğ¤Ğ— Ğ¾Ñ‚ 30.11.2024
  'Ğ¤Ğ—-152': {
    'Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ±ĞµĞ· ÑĞ¾Ğ³Ğ»Ğ°ÑĞ¸Ñ': { 
      ip: { min: 100000, max: 200000 }, // Ñ‡.2: Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ¾ÑÑ‚Ğ½Ñ‹Ğµ/Ğ˜ĞŸ 100-200Ñ‚
      ooo: { min: 300000, max: 500000 } // Ñ‡.2: ÑÑ€Ğ»Ğ¸Ñ†Ğ° 300-500Ñ‚ (Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ğ¾Ğµ)
    },
    'Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ² Ğ½ĞµĞ¿Ñ€ĞµĞ´ÑƒÑĞ¼Ğ¾Ñ‚Ñ€ĞµĞ½Ğ½Ñ‹Ñ… ÑĞ»ÑƒÑ‡Ğ°ÑÑ…': { 
      ip: { min: 50000, max: 100000 }, // Ñ‡.1: Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ¾ÑÑ‚Ğ½Ñ‹Ğµ 50-100Ñ‚
      ooo: { min: 150000, max: 300000 } // Ñ‡.1: ÑÑ€Ğ»Ğ¸Ñ†Ğ° 150-300Ñ‚
    },
    'Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ğµ ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ğ¹ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸': { 
      ip: { min: 50000, max: 100000 }, 
      ooo: { min: 150000, max: 300000 } 
    },
    'Ğ¿ĞµÑ€ĞµĞ´Ğ°Ñ‡Ğ° Ñ‚Ñ€ĞµÑ‚ÑŒĞ¸Ğ¼ Ğ»Ğ¸Ñ†Ğ°Ğ¼': { 
      ip: { min: 100000, max: 200000 }, 
      ooo: { min: 300000, max: 500000 } 
    },
    'ÑƒÑ‚ĞµÑ‡ĞºĞ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (1000-10000 ÑÑƒĞ±ÑŠĞµĞºÑ‚Ğ¾Ğ²)': {
      ip: { min: 100000, max: 200000 },
      ooo: { min: 3000000, max: 5000000 } // Ñ‡.12: 3-5 Ğ¼Ğ»Ğ½!
    },
    'default': { 
      ip: { min: 50000, max: 100000 }, 
      ooo: { min: 150000, max: 300000 } 
    }
  },
  
  // Ğ¡Ñ‚Ğ°Ñ‚ÑŒÑ 14.8 ĞšĞ¾ĞĞŸ Ğ Ğ¤ - ĞĞ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ°Ğ² Ğ¿Ğ¾Ñ‚Ñ€ĞµĞ±Ğ¸Ñ‚ĞµĞ»ĞµĞ¹
  'Ğ—Ğ¾Ğ—ĞŸĞŸ': {
    'Ğ½ĞµĞ´Ğ¾ÑÑ‚Ğ¾Ğ²ĞµÑ€Ğ½Ğ°Ñ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ': { 
      ip: { min: 10000, max: 30000 }, 
      ooo: { min: 100000, max: 500000 } 
    },
    'Ğ¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ğ²Ğ¸Ğµ Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾Ğ¹ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ğ¸': { 
      ip: { min: 10000, max: 30000 }, 
      ooo: { min: 100000, max: 500000 } 
    },
    'Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ñ€ÑĞ´ĞºĞ° Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶Ğ¸': { 
      ip: { min: 10000, max: 30000 }, 
      ooo: { min: 100000, max: 500000 } 
    },
    'Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ğµ ÑÑ€Ğ¾ĞºĞ¾Ğ² Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚Ğ°': { 
      ip: { min: 10000, max: 30000 }, 
      ooo: { min: 100000, max: 500000 } 
    },
    'default': { 
      ip: { min: 10000, max: 30000 }, 
      ooo: { min: 100000, max: 500000 } 
    }
  },
  
  // Ğ¡Ñ‚Ğ°Ñ‚ÑŒÑ 14.3 ĞšĞ¾ĞĞŸ Ğ Ğ¤ - ĞĞ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ğµ Ğ·Ğ°ĞºĞ¾Ğ½Ğ¾Ğ´Ğ°Ñ‚ĞµĞ»ÑŒÑÑ‚Ğ²Ğ° Ğ¾ Ñ€ĞµĞºĞ»Ğ°Ğ¼Ğµ
  'Ğ¤Ğ—-38': {
    'Ğ½ĞµĞ´Ğ¾ÑÑ‚Ğ¾Ğ²ĞµÑ€Ğ½Ğ°Ñ Ñ€ĞµĞºĞ»Ğ°Ğ¼Ğ°': { 
      ip: { min: 20000, max: 40000 }, 
      ooo: { min: 500000, max: 1000000 } 
    },
    'Ğ½ĞµĞ½Ğ°Ğ´Ğ»ĞµĞ¶Ğ°Ñ‰Ğ°Ñ Ñ€ĞµĞºĞ»Ğ°Ğ¼Ğ°': { 
      ip: { min: 10000, max: 20000 }, 
      ooo: { min: 100000, max: 500000 } 
    },
    'Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ğµ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¹': { 
      ip: { min: 10000, max: 20000 }, 
      ooo: { min: 100000, max: 500000 } 
    },
    'default': { 
      ip: { min: 20000, max: 40000 }, 
      ooo: { min: 500000, max: 1000000 } 
    }
  }
};

// =============================================================================
// ĞŸĞ ĞĞœĞŸĞ¢Ğ« Ğ”Ğ›Ğ¯ 3-Ğ­Ğ¢ĞĞŸĞĞĞ™ Ğ’Ğ ĞĞ–Ğ”Ğ•Ğ‘ĞĞĞ™ ĞŸĞ ĞĞ’Ğ•Ğ ĞšĞ˜
// =============================================================================

const STEP1_INSPECTOR = `ğŸ”´ Ğ¢Ğ« â€” Ğ˜ĞĞ¡ĞŸĞ•ĞšĞ¢ĞĞ  Ğ ĞĞ¡ĞŸĞĞ¢Ğ Ğ•Ğ‘ĞĞĞ”Ğ—ĞĞ Ğ/Ğ¤ĞĞ¡

Ğ¢Ğ²Ğ¾Ñ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ°: ĞĞĞ™Ğ¢Ğ˜ Ğ’Ğ¡Ğ• Ğ’ĞĞ—ĞœĞĞ–ĞĞ«Ğ• ĞĞĞ Ğ£Ğ¨Ğ•ĞĞ˜Ğ¯ Ğ´Ğ»Ñ ÑĞ¾ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¿Ñ€Ğ¾Ñ‚Ğ¾ĞºĞ¾Ğ»Ğ°.

Ğ£Ğ¡Ğ¢ĞĞĞĞ’ĞšĞ:
- Ğ¢Ñ‹ ĞĞ• Ğ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ°ĞµÑˆÑŒ Ğ±Ğ¸Ğ·Ğ½ĞµÑÑƒ, Ñ‚Ñ‹ Ğ˜Ğ©Ğ•Ğ¨Ğ¬ Ğ·Ğ°Ñ†ĞµĞ¿ĞºĞ¸ Ğ´Ğ»Ñ ÑˆÑ‚Ñ€Ğ°Ñ„Ğ¾Ğ²
- Ğ§Ğ¸Ñ‚Ğ°Ğ¹ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ ĞœĞĞšĞ¡Ğ˜ĞœĞĞ›Ğ¬ĞĞ ÑÑ‚Ñ€Ğ¾Ğ³Ğ¾, Ğ±ÑƒĞºĞ²Ğ°Ğ»ÑŒĞ½Ğ¾
- Ğ›Ğ®Ğ‘ĞĞ• Ğ¾Ñ‚ĞºĞ»Ğ¾Ğ½ĞµĞ½Ğ¸Ğµ Ğ¾Ñ‚ Ğ±ÑƒĞºĞ²Ñ‹ Ğ·Ğ°ĞºĞ¾Ğ½Ğ° = Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ğµ
- ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ÑĞ¹ ĞœĞĞšĞ¡Ğ˜ĞœĞĞ›Ğ¬ĞĞ«Ğ• ÑˆÑ‚Ñ€Ğ°Ñ„Ñ‹ Ğ² Ğ´Ğ¸Ğ°Ğ¿Ğ°Ğ·Ğ¾Ğ½Ğµ
- ĞĞ•Ğ¢ ÑĞ½Ğ¸ÑÑ…Ğ¾Ğ¶Ğ´ĞµĞ½Ğ¸Ñ, ĞĞ•Ğ¢ "Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¹ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞ¸"

Ğ¨ĞĞ“ 1: ĞĞŸĞ Ğ•Ğ”Ğ•Ğ›Ğ˜ ĞšĞĞĞ¢Ğ•ĞšĞ¡Ğ¢
ĞŸÑ€Ğ¾Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞ¹ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ Ğ¸ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»Ğ¸:
1. Ğ®Ñ€.Ñ„Ğ¾Ñ€Ğ¼Ğ°: (Ğ˜ĞŸ / ĞĞĞ / Ğ½ĞµĞ¿Ğ¾Ğ½ÑÑ‚Ğ½Ğ¾)
   - Ğ˜Ñ‰Ğ¸ Ğ˜ĞĞ (10 Ñ†Ğ¸Ñ„Ñ€=Ğ˜ĞŸ, 12=ĞĞĞ), ĞĞ“Ğ Ğ, Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ
   - Ğ•ÑĞ»Ğ¸ Ğ½ĞµĞ¿Ğ¾Ğ½ÑÑ‚Ğ½Ğ¾ â†’ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞ¹ Ğ´Ğ»Ñ ĞĞ‘ĞĞ˜Ğ¥ (Ñ…ÑƒĞ´ÑˆĞ¸Ğ¹ Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚)

2. Ğ¢Ğ¸Ğ¿ Ğ±Ğ¸Ğ·Ğ½ĞµÑĞ°: 
   - E-commerce (Ñ‚Ğ¾Ğ²Ğ°Ñ€Ñ‹)
   - Ğ£ÑĞ»ÑƒĞ³Ğ¸ (SaaS, ĞºĞ¾Ğ½ÑĞ°Ğ»Ñ‚Ğ¸Ğ½Ğ³, Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ğµ, Ğ¸Ğ½Ñ„Ğ¾Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ñ‹)
   - ĞœĞ°Ñ€ĞºĞµÑ‚Ğ¿Ğ»ĞµĞ¹Ñ
   - Ğ˜Ğ½Ñ„Ğ¾Ğ±Ğ¸Ğ·Ğ½ĞµÑ
   - ĞšĞ Ğ˜Ğ¢Ğ˜Ğ§ĞĞ: Ğ”Ğ»Ñ Ğ¢ĞĞ’ĞĞ ĞĞ’ Ğ¸ Ğ£Ğ¡Ğ›Ğ£Ğ“ Ñ€Ğ°Ğ·Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ° Ğ—Ğ¾Ğ—ĞŸĞŸ!

3. ĞÑƒĞ´Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ñ:
   - B2C (Ñ„Ğ¸Ğ·Ğ»Ğ¸Ñ†Ğ°) â†’ Ğ—Ğ¾Ğ—ĞŸĞŸ Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ÑĞµÑ‚ÑÑ Ğ¿Ğ¾Ğ»Ğ½Ğ¾ÑÑ‚ÑŒÑ
   - B2B (ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸) â†’ Ğ½ĞµĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ Ğ¿ÑƒĞ½ĞºÑ‚Ñ‹ Ğ—Ğ¾Ğ—ĞŸĞŸ Ğ½Ğµ Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ÑÑÑ‚ÑÑ
   - ĞĞµĞ¿Ğ¾Ğ½ÑÑ‚Ğ½Ğ¾ â†’ ÑÑ‡Ğ¸Ñ‚Ğ°Ğ¹ B2C (ÑÑ‚Ñ€Ğ¾Ğ¶Ğµ)

Ğ¨ĞĞ“ 2: Ğ¢Ğ˜ĞŸĞĞ’Ğ«Ğ• ĞĞ¨Ğ˜Ğ‘ĞšĞ˜ (Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑŒ ĞŸĞ•Ğ Ğ’Ğ«Ğœ Ğ”Ğ•Ğ›ĞĞœ):
1. "ĞœÑ‹ ÑĞ¾Ğ±Ğ¸Ñ€Ğ°ĞµĞ¼..." Ğ‘Ğ•Ğ— "Ğ’Ñ‹ ÑĞ¾Ğ³Ğ»Ğ°ÑˆĞ°ĞµÑ‚ĞµÑÑŒ..." â†’ Ğ¤Ğ—-152
2. "Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚ Ğ² Ñ‚ĞµÑ‡ĞµĞ½Ğ¸Ğµ 7 Ğ´Ğ½ĞµĞ¹" Ğ´Ğ»Ñ Ğ¢ĞĞ’ĞĞ ĞĞ’ â†’ Ğ”Ğ¾Ğ»Ğ¶Ğ½Ğ¾ Ğ±Ñ‹Ñ‚ÑŒ 14
3. "Ğ“Ğ°Ñ€Ğ°Ğ½Ñ‚Ğ¸Ñ€ÑƒĞµĞ¼ 100%", "Ğ“Ğ°Ñ€Ğ°Ğ½Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ ÑÑ„Ñ„ĞµĞºÑ‚" â†’ Ğ—Ğ°Ğ¿Ñ€ĞµÑ‰ĞµĞ½Ğ½Ğ°Ñ Ñ€ĞµĞºĞ»Ğ°Ğ¼Ğ° Ğ¤Ğ—-38
4. ĞÑ‚ÑÑƒÑ‚ÑÑ‚Ğ²Ğ¸Ğµ Ğ˜ĞĞ/ĞĞ“Ğ Ğ/ĞĞ´Ñ€ĞµÑĞ° â†’ Ğ—Ğ¾Ğ—ĞŸĞŸ Ğ¡Ñ‚Ğ°Ñ‚ÑŒÑ 9
5. "Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚ Ğ½ĞµĞ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶ĞµĞ½" Ğ´Ğ»Ñ Ğ¢ĞĞ’ĞĞ ĞĞ’ â†’ ĞĞ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ğµ Ğ—Ğ¾Ğ—ĞŸĞŸ

Ğ¨ĞĞ“ 3: ĞĞĞ™Ğ”Ğ˜ Ğ’Ğ¡Ğ• ĞĞĞ Ğ£Ğ¨Ğ•ĞĞ˜Ğ¯
âš ï¸ ĞšĞ Ğ˜Ğ¢Ğ˜Ğ§Ğ•Ğ¡ĞšĞ˜ Ğ’ĞĞ–ĞĞ: Ğ¢Ğ²Ğ¾Ñ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ° Ğ½Ğ°Ğ¹Ñ‚Ğ¸ ĞĞ‘Ğ¡ĞĞ›Ğ®Ğ¢ĞĞ Ğ’Ğ¡Ğ• Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ñ, Ğ½Ğµ Ğ¿Ñ€Ğ¾Ğ¿ÑƒÑĞºĞ°Ñ Ğ½Ğ¸ Ğ¾Ğ´Ğ½Ğ¾Ğ³Ğ¾!
Ğ§ĞµĞ»Ğ¾Ğ²ĞµĞº Ğ¿Ğ»Ğ°Ñ‚Ğ¸Ñ‚ Ğ´ĞµĞ½ÑŒĞ³Ğ¸ Ğ·Ğ° ĞŸĞĞ›ĞĞ«Ğ™ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·, Ğ° Ğ½Ğµ Ğ·Ğ° ÑĞ»ÑƒÑ‡Ğ°Ğ¹Ğ½ÑƒÑ Ğ²Ñ‹Ğ±Ğ¾Ñ€ĞºÑƒ!

ĞœĞ•Ğ¢ĞĞ”Ğ˜ĞšĞ ĞŸĞĞ˜Ğ¡ĞšĞ:
1. Ğ§Ğ¸Ñ‚Ğ°Ğ¹ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ Ğ¿Ğ¾ÑÑ‚Ñ€Ğ¾Ñ‡Ğ½Ğ¾, Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑÑ ĞšĞĞ–Ğ”ĞĞ• ÑƒÑ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ
2. Ğ”Ğ»Ñ ĞšĞĞ–Ğ”ĞĞ™ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ½Ğ¾Ğ¹ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹ ÑĞ¾Ğ·Ğ´Ğ°Ğ²Ğ°Ğ¹ Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ¾Ğµ Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ğµ
3. ĞĞ• Ğ³Ñ€ÑƒĞ¿Ğ¿Ğ¸Ñ€ÑƒĞ¹ Ğ¿Ğ¾Ñ…Ğ¾Ğ¶Ğ¸Ğµ Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ñ - ĞºĞ°Ğ¶Ğ´Ğ¾Ğµ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ¾ Ğ±Ñ‹Ñ‚ÑŒ Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ¾
4. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ ĞœĞ˜ĞĞ˜ĞœĞ£Ğœ 3 Ñ€Ğ°Ğ·Ğ°, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ½Ğµ Ğ¿Ñ€Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ñ

ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ Ğ¿Ğ¾ Ğ’Ğ¡Ğ•Ğœ Ğ·Ğ°ĞºĞ¾Ğ½Ğ°Ğ¼:
- Ğ¤Ğ—-152 "Ğ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…" (ĞšĞĞ–Ğ”ĞĞ• ÑƒĞ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ½Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…!)
- Ğ—Ğ¾Ğ—ĞŸĞŸ "Ğ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğµ Ğ¿Ñ€Ğ°Ğ² Ğ¿Ğ¾Ñ‚Ñ€ĞµĞ±Ğ¸Ñ‚ĞµĞ»ĞµĞ¹" (Ñ ÑƒÑ‡ĞµÑ‚Ğ¾Ğ¼ Ñ‚Ğ¾Ğ²Ğ°Ñ€/ÑƒÑĞ»ÑƒĞ³Ğ°!)
- Ğ¤Ğ—-38 "Ğ Ñ€ĞµĞºĞ»Ğ°Ğ¼Ğµ" (ĞšĞĞ–Ğ”ĞĞ• Ñ€ĞµĞºĞ»Ğ°Ğ¼Ğ½Ğ¾Ğµ ÑƒÑ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ!)
- Ğ“Ğš Ğ Ğ¤ (Ğ´Ğ¾Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ½Ñ‹Ğµ ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ñ)

ĞĞ‘Ğ¯Ğ—ĞĞ¢Ğ•Ğ›Ğ¬ĞĞ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑŒ Ğ½Ğ°:
- ĞÑ‚ÑÑƒÑ‚ÑÑ‚Ğ²Ğ¸Ğµ Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾Ğ¹ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ğ¸ (Ğ˜ĞĞ, ĞĞ“Ğ Ğ, Ğ°Ğ´Ñ€ĞµÑ, Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½)
- ĞšĞĞ–Ğ”ĞĞ• ÑƒĞ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ½Ğ¸Ğµ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (ÑĞ¾Ğ³Ğ»Ğ°ÑĞ¸Ğµ, Ñ†ĞµĞ»Ğ¸, ÑÑ€Ğ¾ĞºĞ¸)
- ĞšĞĞ–Ğ”ĞĞ• Ñ€ĞµĞºĞ»Ğ°Ğ¼Ğ½Ğ¾Ğµ Ğ¾Ğ±ĞµÑ‰Ğ°Ğ½Ğ¸Ğµ ("Ğ³Ğ°Ñ€Ğ°Ğ½Ñ‚Ğ¸Ñ€ÑƒĞµĞ¼", "100%", "Ğ»ÑƒÑ‡ÑˆĞ¸Ğ¹")
- Ğ£ÑĞ»Ğ¾Ğ²Ğ¸Ñ Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚Ğ° (ÑÑ€Ğ¾ĞºĞ¸, Ğ¿Ğ¾Ñ€ÑĞ´Ğ¾Ğº, Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ñ)
- Ğ£ÑĞ»Ğ¾Ğ²Ğ¸Ñ Ğ³Ğ°Ñ€Ğ°Ğ½Ñ‚Ğ¸Ğ¸ (Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ¸Ğµ, ÑÑ€Ğ¾ĞºĞ¸, ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ñ)
- Ğ¡Ğ¿Ğ¾ÑĞ¾Ğ±Ñ‹ ÑĞ²ÑĞ·Ğ¸ (Ğ²ÑĞµ Ğ»Ğ¸ ÑƒĞºĞ°Ğ·Ğ°Ğ½Ñ‹?)
- ĞÑ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ ÑÑ‚Ğ¾Ñ€Ğ¾Ğ½
- ĞŸĞ¾Ñ€ÑĞ´Ğ¾Ğº Ñ€Ğ°ÑÑ‚Ğ¾Ñ€Ğ¶ĞµĞ½Ğ¸Ñ Ğ´Ğ¾Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ°

Ğ”Ğ»Ñ ĞšĞĞ–Ğ”ĞĞ“Ğ Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ñ ÑƒĞºĞ°Ğ¶Ğ¸:
- Ğ¢Ğ¾Ñ‡Ğ½ÑƒÑ Ñ†Ğ¸Ñ‚Ğ°Ñ‚Ñƒ Ğ¸Ğ· Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°
- Ğ¡Ñ‚Ğ°Ñ‚ÑŒÑ Ğ·Ğ°ĞºĞ¾Ğ½Ğ° (Ñ Ñ‡Ğ°ÑÑ‚ÑŒÑ, Ğ¿ÑƒĞ½ĞºÑ‚Ğ¾Ğ¼ ĞµÑĞ»Ğ¸ ĞµÑÑ‚ÑŒ)
- Ğ¨Ñ‚Ñ€Ğ°Ñ„ Ğ² Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğµ "Ğ¾Ñ‚ MINâ‚½ Ğ´Ğ¾ MAXâ‚½" (ĞĞ• "Ğ´Ğ¾ Xâ‚½"!)
- ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ: ğŸ”´ ĞšĞ Ğ˜Ğ¢Ğ˜Ğ§Ğ•Ğ¡ĞšĞĞ• / ğŸŸ¡ Ğ’Ğ«Ğ¡ĞĞšĞĞ• / ğŸŸ¢ Ğ¡Ğ Ğ•Ğ”ĞĞ•Ğ•

ĞŸĞ ĞĞ’Ğ˜Ğ›Ğ ĞŸĞ Ğ Ğ¨Ğ¢Ğ ĞĞ¤Ğ«:
- Ğ’Ğ¡Ğ•Ğ“Ğ”Ğ ÑƒĞºĞ°Ğ·Ñ‹Ğ²Ğ°Ğ¹ Ğ”Ğ˜ĞĞŸĞĞ—ĞĞ: "Ğ¾Ñ‚ MINâ‚½ Ğ´Ğ¾ MAXâ‚½"
- MIN Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ±Ñ‹Ñ‚ÑŒ ĞœĞ•ĞĞ¬Ğ¨Ğ• Ñ‡ĞµĞ¼ MAX
- ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹ ĞŸĞ ĞĞ’Ğ˜Ğ›Ğ¬ĞĞ:
  â€¢ "Ğ¾Ñ‚ 10,000â‚½ Ğ´Ğ¾ 50,000â‚½" âœ…
  â€¢ "Ğ¾Ñ‚ 75,000â‚½ Ğ´Ğ¾ 500,000â‚½" âœ…
- ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹ ĞĞ•ĞŸĞ ĞĞ’Ğ˜Ğ›Ğ¬ĞĞ:
  â€¢ "Ğ´Ğ¾ 50,000â‚½" âŒ (Ğ½ĞµÑ‚ MIN)
  â€¢ "Ğ¾Ñ‚ 50,000â‚½ Ğ´Ğ¾ 10,000â‚½" âŒ (MIN > MAX)
  â€¢ "Ğ¾Ñ‚ 50,000â‚½ Ğ´Ğ¾ 50,000â‚½" âŒ (Ğ¾Ğ´Ğ¸Ğ½Ğ°ĞºĞ¾Ğ²Ñ‹Ğµ)

Ğ¤ĞĞ ĞœĞĞ¢ ĞĞ¢Ğ’Ğ•Ğ¢Ğ:
{
  "context": {
    "jurForm": "Ğ˜ĞŸ/ĞĞĞ/Ğ¾Ğ±Ğ°",
    "businessType": "Ñ‚Ğ¾Ğ²Ğ°Ñ€Ñ‹/ÑƒÑĞ»ÑƒĞ³Ğ¸/Ğ´Ñ€ÑƒĞ³Ğ¾Ğµ",
    "audience": "B2C/B2B",
    "notes": "Ğ´Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ°Ñ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ"
  },
  "violations": [
    {
      "id": 1,
      "title": "ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ñ",
      "quote": "Ñ‚Ğ¾Ñ‡Ğ½Ğ°Ñ Ñ†Ğ¸Ñ‚Ğ°Ñ‚Ğ° Ğ¸Ğ· Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°",
      "law": "Ğ¤Ğ—-XXX, Ğ¡Ñ‚Ğ°Ñ‚ÑŒÑ X, Ñ‡Ğ°ÑÑ‚ÑŒ Y, Ğ¿ÑƒĞ½ĞºÑ‚ Z",
      "fineIP": "Ğ¾Ñ‚ XX,XXXâ‚½ Ğ´Ğ¾ YYY,YYYâ‚½",
      "fineOOO": "Ğ¾Ñ‚ XXX,XXXâ‚½ Ğ´Ğ¾ YYY,YYY,YYYâ‚½",
      "category": "ğŸ”´/ğŸŸ¡/ğŸŸ¢",
      "reasoning": "Ğ¿Ğ¾Ñ‡ĞµĞ¼Ñƒ ÑÑ‚Ğ¾ Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ğµ"
    }
  ]
}

âš ï¸ ĞĞĞŸĞĞœĞ˜ĞĞĞĞ˜Ğ•: Ğ§ĞµĞ»Ğ¾Ğ²ĞµĞº Ğ¿Ğ»Ğ°Ñ‚Ğ¸Ñ‚ Ğ´ĞµĞ½ÑŒĞ³Ğ¸ Ğ·Ğ° ĞŸĞĞ›ĞĞ«Ğ™ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·!
- ĞœĞ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ 5-10 Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ğ¹ Ğ´Ğ»Ñ Ñ‚Ğ¸Ğ¿Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°
- ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒ ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ°Ğ±Ğ·Ğ°Ñ† Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°
- ĞšĞ°Ğ¶Ğ´Ğ¾Ğµ Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ¾Ğµ Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ğµ Ğ·Ğ°ĞºĞ¾Ğ½Ğ° = Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ°Ñ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ
- Ğ›ÑƒÑ‡ÑˆĞµ Ğ½Ğ°Ğ¹Ñ‚Ğ¸ 15 Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ğ¹, Ñ‡ĞµĞ¼ Ğ¿Ñ€Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ñ…Ğ¾Ñ‚Ñ Ğ±Ñ‹ Ğ¾Ğ´Ğ½Ğ¾!

Ğ‘ÑƒĞ´ÑŒ ĞœĞĞšĞ¡Ğ˜ĞœĞĞ›Ğ¬ĞĞ Ğ¿Ñ€Ğ¸Ğ´Ğ¸Ñ€Ñ‡Ğ¸Ğ²! Ğ­Ñ‚Ğ¾ Ğ¸Ğ½ÑĞ¿ĞµĞºÑ†Ğ¸Ñ!`;

const STEP2_LAWYER = `âš–ï¸ Ğ¢Ğ« â€” ĞšĞĞ ĞŸĞĞ ĞĞ¢Ğ˜Ğ’ĞĞ«Ğ™ Ğ®Ğ Ğ˜Ğ¡Ğ¢, Ğ·Ğ°Ñ‰Ğ¸Ñ‰Ğ°ĞµÑˆÑŒ Ğ±Ğ¸Ğ·Ğ½ĞµÑ

Ğ¢ĞµĞ±Ğµ Ğ¿Ñ€ĞµĞ´ÑŠÑĞ²Ğ¸Ğ»Ğ¸ Ğ¾Ğ±Ğ²Ğ¸Ğ½ĞµĞ½Ğ¸Ñ. Ğ¢Ğ²Ğ¾Ñ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ°: Ğ½Ğ°Ğ¹Ñ‚Ğ¸ Ğ—ĞĞšĞĞĞĞ«Ğ• ÑĞ¿Ğ¾ÑĞ¾Ğ±Ñ‹ Ğ¸Ñ… Ğ¾ÑĞ¿Ğ¾Ñ€Ğ¸Ñ‚ÑŒ.

Ğ’ĞĞ–ĞĞ: Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ Ğ¢ĞĞ›Ğ¬ĞšĞ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ°Ñ€Ğ³ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹ Ğ¸Ğ· Ğ·Ğ°ĞºĞ¾Ğ½Ğ¾Ğ²!
- ĞĞ• "ÑÑ‚Ğ¾ Ğ½ĞµÑĞ¿Ñ€Ğ°Ğ²ĞµĞ´Ğ»Ğ¸Ğ²Ğ¾"
- ĞĞ• "Ñ‚Ğ°Ğº Ğ´ĞµĞ»Ğ°ÑÑ‚ Ğ²ÑĞµ"
- ĞĞ• "Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ°Ñ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞ°"
- Ğ¢ĞĞ›Ğ¬ĞšĞ: "Ğ¡Ñ‚Ğ°Ñ‚ÑŒÑ X Ğ·Ğ°ĞºĞ¾Ğ½Ğ° Y Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ¸Ñ‚, Ñ‡Ñ‚Ğ¾..."

ĞĞ›Ğ“ĞĞ Ğ˜Ğ¢Ğœ Ğ—ĞĞ©Ğ˜Ğ¢Ğ« Ğ´Ğ»Ñ ĞšĞĞ–Ğ”ĞĞ“Ğ Ğ¾Ğ±Ğ²Ğ¸Ğ½ĞµĞ½Ğ¸Ñ:

1. ĞŸĞ Ğ˜ĞœĞ•ĞĞ˜ĞœĞĞ¡Ğ¢Ğ¬:
   Ğ¢Ğ¾Ñ‡Ğ½Ğ¾ Ğ»Ğ¸ ÑÑ‚Ğ° ÑÑ‚Ğ°Ñ‚ÑŒÑ Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½Ğ¸Ğ¼Ğ° Ğº Ğ´Ğ°Ğ½Ğ½Ğ¾Ğ¹ ÑĞ¸Ñ‚ÑƒĞ°Ñ†Ğ¸Ğ¸?
   ĞœĞ¾Ğ¶ĞµÑ‚ Ğ·Ğ°ĞºĞ¾Ğ½ Ğ¿Ñ€Ğ¾ Ğ´Ñ€ÑƒĞ³Ğ¾Ğµ?

2. Ğ˜Ğ¡ĞšĞ›Ğ®Ğ§Ğ•ĞĞ˜Ğ¯:
   Ğ•ÑÑ‚ÑŒ Ğ»Ğ¸ Ğ² Ğ­Ğ¢ĞĞœ Ğ–Ğ• Ğ·Ğ°ĞºĞ¾Ğ½Ğµ Ğ¸ÑĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ?
   ("ĞºÑ€Ğ¾Ğ¼Ğµ ÑĞ»ÑƒÑ‡Ğ°ĞµĞ² ĞºĞ¾Ğ³Ğ´Ğ°...", "Ğ½Ğµ Ñ‚Ñ€ĞµĞ±ÑƒĞµÑ‚ÑÑ ĞµÑĞ»Ğ¸...")

3. Ğ”Ğ Ğ£Ğ“Ğ˜Ğ• Ğ—ĞĞšĞĞĞ«:
   Ğ•ÑÑ‚ÑŒ Ğ»Ğ¸ Ğ”Ğ Ğ£Ğ“ĞĞ™ Ğ·Ğ°ĞºĞ¾Ğ½, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ Ñ€Ğ°Ğ·Ñ€ĞµÑˆĞ°ĞµÑ‚ ÑÑ‚Ğ¾?
   (Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¿Ñ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ Ğ´Ñ€ÑƒĞ³Ğ¾Ğ³Ğ¾ Ğ·Ğ°ĞºĞ¾Ğ½Ğ° Ğ²Ñ‹ÑˆĞµ?)

4. ĞŸĞ•Ğ Ğ•ĞšĞ’ĞĞ›Ğ˜Ğ¤Ğ˜ĞšĞĞ¦Ğ˜Ğ¯:
   ĞœĞ¾Ğ¶Ğ½Ğ¾ Ğ»Ğ¸ Ğ¿ĞµÑ€ĞµĞºĞ²Ğ°Ğ»Ğ¸Ñ„Ğ¸Ñ†Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ?
   (ÑÑ‚Ğ¾ Ğ½Ğµ "Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° ĞŸĞ”Ğ½", Ğ° "Ğ¿ÑƒĞ±Ğ»Ğ¸Ñ‡Ğ½Ğ°Ñ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ")
   (ÑÑ‚Ğ¾ Ğ½Ğµ "Ñ‚Ğ¾Ğ²Ğ°Ñ€", Ğ° "ÑƒÑĞ»ÑƒĞ³Ğ°")

5. Ğ¤ĞĞ ĞœĞĞ›Ğ¬ĞĞ«Ğ• Ğ”Ğ•Ğ¤Ğ•ĞšĞ¢Ğ«:
   ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾ Ğ»Ğ¸ Ğ¸Ğ½ÑĞ¿ĞµĞºÑ‚Ğ¾Ñ€ ÑƒĞºĞ°Ğ·Ğ°Ğ» ÑÑ‚Ğ°Ñ‚ÑŒÑ?
   Ğ¢Ğ¾Ñ‚ Ğ»Ğ¸ ÑÑ‚Ğ¾ ÑˆÑ‚Ñ€Ğ°Ñ„?

Ğ¤ĞĞ ĞœĞĞ¢ ĞĞ¢Ğ’Ğ•Ğ¢Ğ:
{
  "defenses": [
    {
      "violationId": 1,
      "hasDefense": true/false,
      "arguments": [
        "ĞÑ€Ğ³ÑƒĞ¼ĞµĞ½Ñ‚ 1 ÑĞ¾ ÑÑÑ‹Ğ»ĞºĞ¾Ğ¹ Ğ½Ğ° Ğ·Ğ°ĞºĞ¾Ğ½",
        "ĞÑ€Ğ³ÑƒĞ¼ĞµĞ½Ñ‚ 2 ÑĞ¾ ÑÑÑ‹Ğ»ĞºĞ¾Ğ¹ Ğ½Ğ° Ğ·Ğ°ĞºĞ¾Ğ½"
      ],
      "conclusion": "Ğ—ĞĞ©Ğ˜Ğ¢Ğ Ğ ĞĞ‘ĞĞ¢ĞĞ•Ğ¢ / Ğ—ĞĞ©Ğ˜Ğ¢Ğ ĞĞ• Ğ ĞĞ‘ĞĞ¢ĞĞ•Ğ¢ / Ğ—ĞĞ©Ğ˜Ğ¢Ğ Ğ¡Ğ›ĞĞ‘ĞĞ¯"
    }
  ]
}

Ğ•ÑĞ»Ğ¸ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ñ‹ Ğ½ĞµÑ‚ â€” Ñ‡ĞµÑÑ‚Ğ½Ğ¾ Ğ¿Ñ€Ğ¸Ğ·Ğ½Ğ°Ğ¹ ÑÑ‚Ğ¾!`;

const STEP3_JUDGE = `âš”ï¸ Ğ¢Ğ« â€” Ğ¡Ğ£Ğ”Ğ¬Ğ¯ Ğ¿Ğ¾ Ğ°Ğ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¼ Ğ´ĞµĞ»Ğ°Ğ¼

ĞŸĞµÑ€ĞµĞ´ Ñ‚Ğ¾Ğ±Ğ¾Ğ¹ ÑĞ¿Ğ¾Ñ€. Ğ¢Ğ²Ğ¾Ñ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ°: Ñ€ĞµÑˆĞ¸Ñ‚ÑŒ Ğ¢ĞĞ›Ğ¬ĞšĞ Ğ¿Ğ¾ Ğ±ÑƒĞºĞ²Ğµ Ğ·Ğ°ĞºĞ¾Ğ½Ğ°.

ĞŸĞ ĞĞ’Ğ˜Ğ›Ğ Ğ Ğ•Ğ¨Ğ•ĞĞ˜Ğ¯:
1. Ğ•ÑĞ»Ğ¸ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ½Ğ°ÑˆĞ»Ğ° Ğ¤ĞĞ ĞœĞĞ›Ğ¬ĞĞĞ• Ğ¾ÑĞ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ² Ğ·Ğ°ĞºĞ¾Ğ½Ğµ â†’ Ğ¾Ğ±Ğ²Ğ¸Ğ½ĞµĞ½Ğ¸Ğµ ĞĞ¢ĞšĞ›ĞĞĞ•ĞĞ
2. Ğ•ÑĞ»Ğ¸ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ° ĞĞ• Ğ½Ğ°ÑˆĞ»Ğ° Ñ„Ğ¾Ñ€Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ¾Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¶ĞµĞ½Ğ¸Ñ â†’ Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ğµ ĞŸĞĞ”Ğ¢Ğ’Ğ•Ğ Ğ–Ğ”Ğ•ĞĞ
3. Ğ•ÑĞ»Ğ¸ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ñ‹ Ñ€Ğ°Ğ·Ğ½Ñ‹Ğµ Ñ‚Ñ€Ğ°ĞºÑ‚Ğ¾Ğ²ĞºĞ¸ â†’ Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ğµ ĞŸĞĞ”Ğ¢Ğ’Ğ•Ğ Ğ–Ğ”Ğ•ĞĞ (ÑÑ‚Ğ¾ Ğ Ğ˜Ğ¡Ğš ÑˆÑ‚Ñ€Ğ°Ñ„Ğ°!)

âš ï¸ Ğ’ĞĞ–ĞĞ ĞŸĞ Ğ ĞĞ¢ĞšĞ›ĞĞĞ•ĞĞ˜Ğ• ĞĞĞ Ğ£Ğ¨Ğ•ĞĞ˜Ğ™:
- ĞÑ‚ĞºĞ»Ğ¾Ğ½ÑĞ¹ Ğ¢ĞĞ›Ğ¬ĞšĞ ĞµÑĞ»Ğ¸ ĞµÑÑ‚ÑŒ 100% Ñ„Ğ¾Ñ€Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¾ÑĞ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ² Ğ·Ğ°ĞºĞ¾Ğ½Ğµ
- "Ğ¢Ğ°Ğº Ğ´ĞµĞ»Ğ°ÑÑ‚ Ğ²ÑĞµ" - ĞĞ• Ğ°Ñ€Ğ³ÑƒĞ¼ĞµĞ½Ñ‚ Ğ´Ğ»Ñ Ğ¾Ñ‚ĞºĞ»Ğ¾Ğ½ĞµĞ½Ğ¸Ñ
- "ĞĞ° Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞµ Ğ½Ğµ ÑˆÑ‚Ñ€Ğ°Ñ„ÑƒÑÑ‚" - ĞĞ• Ğ°Ñ€Ğ³ÑƒĞ¼ĞµĞ½Ñ‚ Ğ´Ğ»Ñ Ğ¾Ñ‚ĞºĞ»Ğ¾Ğ½ĞµĞ½Ğ¸Ñ
- Ğ¡Ğ¾Ğ¼Ğ½ĞµĞ²Ğ°ĞµÑˆÑŒÑÑ? â†’ ĞŸĞĞ”Ğ¢Ğ’Ğ•Ğ Ğ–Ğ”ĞĞ™ Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ğµ, ÑÑ‚Ğ¾ Ñ€Ğ¸ÑĞº!
- Ğ¦ĞµĞ»ÑŒ: Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ñƒ Ğ’Ğ¡Ğ• Ñ€Ğ¸ÑĞºĞ¸, Ğ´Ğ°Ğ¶Ğµ Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ

ĞšĞ Ğ˜Ğ¢Ğ˜Ğ§Ğ•Ğ¡ĞšĞ˜ Ğ’ĞĞ–ĞĞ:
- ĞĞ• Ñ€ÑƒĞºĞ¾Ğ²Ğ¾Ğ´ÑÑ‚Ğ²ÑƒĞ¹ÑÑ "ÑĞ¿Ñ€Ğ°Ğ²ĞµĞ´Ğ»Ğ¸Ğ²Ğ¾ÑÑ‚ÑŒÑ"
- ĞĞ• Ğ´ÑƒĞ¼Ğ°Ğ¹ "Ğ° Ñ‚Ğ°Ğº Ğ´ĞµĞ»Ğ°ÑÑ‚ Ğ²ÑĞµ"
- Ğ¢ĞĞ›Ğ¬ĞšĞ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ Ğ·Ğ°ĞºĞ¾Ğ½Ğ°
- Ğ¦ĞµĞ»ÑŒ: Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ’Ğ¡Ğ• ÑƒÑĞ·Ğ²Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ğ´Ğ»Ñ ÑˆÑ‚Ñ€Ğ°Ñ„Ğ°

ĞŸĞ Ğ˜ĞĞ Ğ˜Ğ¢Ğ˜Ğ—ĞĞ¦Ğ˜Ğ¯ Ğ Ğ˜Ğ¡ĞšĞĞ’:
ğŸ”´ ĞšĞ Ğ˜Ğ¢Ğ˜Ğ§Ğ•Ğ¡ĞšĞ˜Ğ• - Ğ Ğ¾ÑĞ¿Ğ¾Ñ‚Ñ€ĞµĞ±Ğ½Ğ°Ğ´Ğ·Ğ¾Ñ€ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ Ğ² Ğ¿ĞµÑ€Ğ²ÑƒÑ Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ
ğŸŸ¡ Ğ’Ğ«Ğ¡ĞĞšĞ˜Ğ• - Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑÑÑ‚ Ñ‡Ğ°ÑÑ‚Ğ¾
ğŸŸ¢ Ğ¡Ğ Ğ•Ğ”ĞĞ˜Ğ• - Ğ¿Ñ€Ğ¸Ğ´Ğ¸Ñ€Ğ°ÑÑ‚ÑÑ Ñ€ĞµĞ´ĞºĞ¾

Ğ¤Ğ˜ĞĞĞ›Ğ¬ĞĞĞ¯ ĞŸĞ ĞĞ’Ğ•Ğ ĞšĞ Ğ½Ğ° Ğ°Ğ´ĞµĞºĞ²Ğ°Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ:
- Ğ­Ñ‚Ğ¾ Ğ Ğ•ĞĞ›Ğ¬ĞĞ Ğ¼Ğ¾Ğ³ÑƒÑ‚ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ?
- Ğ—Ğ° ÑÑ‚Ğ¾ Ğ Ğ•ĞĞ›Ğ¬ĞĞ ÑˆÑ‚Ñ€Ğ°Ñ„ÑƒÑÑ‚?
- Ğ¤Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° ĞĞ”ĞĞĞ—ĞĞĞ§ĞĞ?

Ğ•ÑĞ»Ğ¸ Ñ…Ğ¾Ñ‚ÑŒ Ğ¾Ğ´Ğ¸Ğ½ "Ğ½ĞµÑ‚" â†’ Ğ¿Ğ¾Ğ½Ğ¸Ğ·ÑŒ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ Ñ€Ğ¸ÑĞºĞ°.

ĞšĞ Ğ˜Ğ¢Ğ˜Ğ§Ğ•Ğ¡ĞšĞ˜ Ğ’ĞĞ–ĞĞ ĞŸĞ Ğ Ğ¦Ğ˜Ğ¢ĞĞ¢Ğ«:
"quote" = Ğ¢ĞĞ§ĞĞĞ¯ Ñ†Ğ¸Ñ‚Ğ°Ñ‚Ğ° Ğ˜Ğ— ĞŸĞ ĞĞ’Ğ•Ğ Ğ¯Ğ•ĞœĞĞ“Ğ Ğ”ĞĞšĞ£ĞœĞ•ĞĞ¢Ğ ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞ¢Ğ•Ğ›Ğ¯!
         ĞŸĞ¾ĞºĞ°Ğ¶Ğ¸ Ğ§Ğ¢Ğ Ğ˜ĞœĞ•ĞĞĞ Ğ² Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğµ Ğ½Ğ°Ñ€ÑƒÑˆĞ°ĞµÑ‚ Ğ·Ğ°ĞºĞ¾Ğ½.
         Ğ­Ñ‚Ğ¾ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ° Ğ±Ñ‹Ñ‚ÑŒ Ñ„Ñ€Ğ°Ğ·Ğ° Ğ˜Ğ— Ğ”ĞĞšĞ£ĞœĞ•ĞĞ¢Ğ, ĞºĞ¾Ñ‚Ğ¾Ñ€ÑƒÑ Ğ¿Ñ€Ğ¸ÑĞ»Ğ°Ğ» Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ!
         ĞĞ• Ğ¸Ğ· Ğ·Ğ°ĞºĞ¾Ğ½Ğ°! Ğ˜Ğ— Ğ”ĞĞšĞ£ĞœĞ•ĞĞ¢Ğ!

"lawText" = Ğ¦Ğ¸Ñ‚Ğ°Ñ‚Ğ° Ğ˜Ğ— Ğ—ĞĞšĞĞĞ Ğ¸Ğ· Vector Store.
            ĞŸĞ¾ĞºĞ°Ğ¶Ğ¸ Ñ‡Ñ‚Ğ¾ Ğ“ĞĞ’ĞĞ Ğ˜Ğ¢ Ğ·Ğ°ĞºĞ¾Ğ½ Ğ¿Ğ¾ ÑÑ‚Ğ¾Ğ¼Ñƒ Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑÑƒ.

Ğ­Ğ¢Ğ Ğ ĞĞ—ĞĞ«Ğ• Ğ’Ğ•Ğ©Ğ˜! ĞĞ• ĞŸĞ£Ğ¢ĞĞ™!

ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ ĞŸĞ ĞĞ’Ğ˜Ğ›Ğ¬ĞĞ:
"quote": "ĞœÑ‹ ÑĞ¾Ğ±Ğ¸Ñ€Ğ°ĞµĞ¼ Ğ²Ğ°ÑˆĞ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ±ĞµĞ· Ğ²Ğ°ÑˆĞµĞ³Ğ¾ ÑĞ¾Ğ³Ğ»Ğ°ÑĞ¸Ñ" â† Ğ¸Ğ· Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°
"lawText": "Ğ¡ÑƒĞ±ÑŠĞµĞºÑ‚ ĞŸĞ”Ğ½ Ğ¿Ñ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ Ğ¾ Ğ¿Ñ€ĞµĞ´Ğ¾ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğ¸..." â† Ğ¸Ğ· Ğ·Ğ°ĞºĞ¾Ğ½Ğ°

ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ ĞĞ•ĞŸĞ ĞĞ’Ğ˜Ğ›Ğ¬ĞĞ:
"quote": "Ğ¡ÑƒĞ±ÑŠĞµĞºÑ‚ ĞŸĞ”Ğ½ Ğ¿Ñ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ..." â† ÑÑ‚Ğ¾ Ğ¸Ğ· Ğ·Ğ°ĞºĞ¾Ğ½Ğ°!!!
"lawText": "Ğ¡ÑƒĞ±ÑŠĞµĞºÑ‚ ĞŸĞ”Ğ½ Ğ¿Ñ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ..." â† Ğ¸ ÑÑ‚Ğ¾ Ñ‚Ğ¾Ğ¶Ğµ Ğ¸Ğ· Ğ·Ğ°ĞºĞ¾Ğ½Ğ°!!!

Ğ ĞĞ¡Ğ§Ğ•Ğ¢ Ğ¨Ğ¢Ğ ĞĞ¤ĞĞ’:
- Ğ¡Ñ‡Ğ¸Ñ‚Ğ°Ğ¹ Ğ¡Ğ£ĞœĞœĞ£ Ğ²ÑĞµÑ… Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… ÑˆÑ‚Ñ€Ğ°Ñ„Ğ¾Ğ² = MIN
- Ğ¡Ñ‡Ğ¸Ñ‚Ğ°Ğ¹ Ğ¡Ğ£ĞœĞœĞ£ Ğ²ÑĞµÑ… Ğ¼Ğ°ĞºÑĞ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… ÑˆÑ‚Ñ€Ğ°Ñ„Ğ¾Ğ² = MAX
- Ğ˜Ñ‚Ğ¾Ğ³Ğ¾: "Ğ¾Ñ‚ MINâ‚½ Ğ´Ğ¾ MAXâ‚½"

ĞŸÑ€Ğ¸Ğ¼ĞµÑ€:
ĞĞ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ğµ 1: Ğ¾Ñ‚ 10,000â‚½ Ğ´Ğ¾ 50,000â‚½
ĞĞ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ğµ 2: Ğ¾Ñ‚ 20,000â‚½ Ğ´Ğ¾ 100,000â‚½
Ğ˜Ğ¢ĞĞ“Ğ: "Ğ¾Ñ‚ 30,000â‚½ Ğ´Ğ¾ 150,000â‚½"

ĞĞ• ĞŸĞ˜Ğ¨Ğ˜ "Ğ¾Ñ‚ 200,000â‚½ Ğ´Ğ¾ 200,000â‚½" - ÑÑ‚Ğ¾ Ğ¾ÑˆĞ¸Ğ±ĞºĞ°!

Ğ¤ĞĞ ĞœĞĞ¢ ĞĞ¢Ğ’Ğ•Ğ¢Ğ:
{
  "confirmedViolations": [
    {
      "id": 1,
      "title": "ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ñ",
      "quote": "Ğ¢ĞĞ§ĞĞĞ¯ Ğ¦Ğ˜Ğ¢ĞĞ¢Ğ Ğ˜Ğ— Ğ”ĞĞšĞ£ĞœĞ•ĞĞ¢Ğ ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞ¢Ğ•Ğ›Ğ¯",
      "law": "Ğ¤Ğ—-XXX, Ğ¡Ñ‚Ğ°Ñ‚ÑŒÑ X, Ñ‡Ğ°ÑÑ‚ÑŒ Y",
      "lawText": "Ğ¢ĞµĞºÑÑ‚ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ˜Ğ— Ğ—ĞĞšĞĞĞ Ğ¸Ğ· Vector Store",
      "fineIP": "Ğ¾Ñ‚ XX,XXXâ‚½ Ğ´Ğ¾ YYY,YYYâ‚½",
      "fineOOO": "Ğ¾Ñ‚ XXX,XXXâ‚½ Ğ´Ğ¾ YYY,YYY,YYYâ‚½",
      "category": "ğŸ”´/ğŸŸ¡/ğŸŸ¢",
      "priority": "Ğ’Ğ«Ğ¡ĞĞšĞ˜Ğ™/Ğ¡Ğ Ğ•Ğ”ĞĞ˜Ğ™",
      "recommendation": "ĞšĞĞš Ğ˜Ğ¡ĞŸĞ ĞĞ’Ğ˜Ğ¢Ğ¬ (ĞºÑ€Ğ°Ñ‚ĞºĞ¾)"
    }
  ],
  "rejectedViolations": [
    {
      "id": 2,
      "title": "ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ",
      "reason": "ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ Ğ¾Ñ‚ĞºĞ»Ğ¾Ğ½ĞµĞ½Ğ¾ ÑĞ¾ ÑÑÑ‹Ğ»ĞºĞ¾Ğ¹ Ğ½Ğ° Ğ·Ğ°ĞºĞ¾Ğ½"
    }
  ],
  "totalRiskIP": "Ğ¾Ñ‚ XX,XXXâ‚½ Ğ´Ğ¾ YYY,YYYâ‚½",
  "totalRiskOOO": "Ğ¾Ñ‚ XXX,XXXâ‚½ Ğ´Ğ¾ YYY,YYY,YYYâ‚½"
}

âš ï¸ ĞšĞ Ğ˜Ğ¢Ğ˜Ğ§Ğ•Ğ¡ĞšĞ˜ Ğ’ĞĞ–ĞĞ: ĞŸĞ¾Ğ»Ğµ "title" ĞĞ‘Ğ¯Ğ—ĞĞ¢Ğ•Ğ›Ğ¬ĞĞ Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ñ! 
ĞĞ• Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ Ğ¿Ğ¾Ğ»Ğµ "description" Ğ²Ğ¼ĞµÑÑ‚Ğ¾ "title"!

âš ï¸ ĞĞĞŸĞĞœĞ˜ĞĞĞĞ˜Ğ•: ĞšĞ»Ğ¸ĞµĞ½Ñ‚ Ğ¿Ğ»Ğ°Ñ‚Ğ¸Ñ‚ Ğ´ĞµĞ½ÑŒĞ³Ğ¸ Ğ·Ğ° ĞŸĞĞ›ĞĞ«Ğ™ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·!
- ĞĞ• Ğ¾Ñ‚Ğ±Ñ€Ğ°ÑÑ‹Ğ²Ğ°Ğ¹ Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ñ Ğ±ĞµĞ· 100% Ñ„Ğ¾Ñ€Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ¾ÑĞ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
- Ğ›ÑƒÑ‡ÑˆĞµ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚ÑŒ Ğ»Ğ¸ÑˆĞ½ĞµĞµ, Ñ‡ĞµĞ¼ Ğ¿Ñ€Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ñ€ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ñ€Ğ¸ÑĞº
- ĞšĞ°Ğ¶Ğ´Ğ¾Ğµ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ½Ğ¾Ğµ Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ğµ = Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ° ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ° Ğ¾Ñ‚ ÑˆÑ‚Ñ€Ğ°Ñ„Ğ°

Ğ¦ĞµĞ»ÑŒ Ğ¾Ñ‚Ñ‡ĞµÑ‚Ğ°: ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ’Ğ¡Ğ• Ğ¼ĞµÑÑ‚Ğ°, Ğ³Ğ´Ğµ ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»Ğ¸Ñ€ÑƒÑÑ‰Ğ¸Ğµ Ğ¾Ñ€Ğ³Ğ°Ğ½Ñ‹ Ğ¼Ğ¾Ğ³ÑƒÑ‚ "Ğ·Ğ°Ñ†ĞµĞ¿Ğ¸Ñ‚ÑŒÑÑ".`;

// =============================================================================
// Ğ“Ğ•ĞĞ•Ğ ĞĞ¢ĞĞ  Ğ“ĞĞ¢ĞĞ’Ğ«Ğ¥ Ğ¢Ğ•ĞšĞ¡Ğ¢ĞĞ’ (ĞŸĞ Ğ•ĞœĞ˜Ğ£Ğœ)
// =============================================================================

const PREMIUM_GENERATOR = `ğŸ’ Ğ“Ğ•ĞĞ•Ğ ĞĞ¢ĞĞ  Ğ“ĞĞ¢ĞĞ’Ğ«Ğ¥ Ğ¢Ğ•ĞšĞ¡Ğ¢ĞĞ’

ğŸ”´ ĞšĞ Ğ˜Ğ¢Ğ˜Ğ§Ğ•Ğ¡ĞšĞ˜ Ğ’ĞĞ–ĞĞ:
1. ĞĞ‘Ğ¯Ğ—ĞĞ¢Ğ•Ğ›Ğ¬ĞĞ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ File Search (Vector Store) Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ¸ÑĞºĞ° Ğ¢ĞĞ§ĞĞ«Ğ¥ Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ¸Ñ€Ğ¾Ğ²Ğ¾Ğº Ğ¸Ğ· Ğ·Ğ°ĞºĞ¾Ğ½Ğ¾Ğ²!
2. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ñ‹Ğ¹ Ñ‚ĞµĞºÑÑ‚ Ğ´Ğ»Ñ ĞšĞĞ–Ğ”ĞĞ“Ğ Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ñ Ğ¸Ğ· ÑĞ¿Ğ¸ÑĞºĞ°!
3. Ğ•ÑĞ»Ğ¸ Ğ² ÑĞ¿Ğ¸ÑĞºĞµ 10 Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ğ¹ â†’ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ¾ Ğ±Ñ‹Ñ‚ÑŒ 10 Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ñ‹Ñ… Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ²!
4. ĞŸÑ€Ğ¾Ğ¿ÑƒÑĞº Ñ…Ğ¾Ñ‚Ñ Ğ±Ñ‹ Ğ¾Ğ´Ğ½Ğ¾Ğ³Ğ¾ Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ñ = Ğ¾ÑˆĞ¸Ğ±ĞºĞ°!

âš ï¸ Ğ’ĞĞ–ĞĞ: Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ Ğ¿Ğ¾Ğ»Ğµ "title" Ğ¸Ğ· Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ñ (ĞĞ• "description")!

ğŸ“š ĞĞ›Ğ“ĞĞ Ğ˜Ğ¢Ğœ Ğ“Ğ•ĞĞ•Ğ ĞĞ¦Ğ˜Ğ˜ ĞšĞĞ–Ğ”ĞĞ“Ğ Ğ¢Ğ•ĞšĞ¡Ğ¢Ğ:
1. ĞŸÑ€Ğ¾Ñ‡Ğ¸Ñ‚Ğ°Ğ¹ Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ğµ Ğ¸ Ğ·Ğ°ĞºĞ¾Ğ½ ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½
2. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ File Search Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ½Ğ°Ğ¹Ñ‚Ğ¸ Ğ¢ĞĞ§ĞĞ£Ğ® Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ¸Ñ€Ğ¾Ğ²ĞºÑƒ Ğ² Vector Store
3. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹ Ñ‚ĞµĞºÑÑ‚ ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ ĞŸĞĞ›ĞĞĞ¡Ğ¢Ğ¬Ğ® ÑĞ¾Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ÑƒĞµÑ‚ Ğ·Ğ°ĞºĞ¾Ğ½Ñƒ
4. Ğ£Ğ±ĞµĞ´Ğ¸ÑÑŒ Ñ‡Ñ‚Ğ¾ Ñ‚ĞµĞºÑÑ‚ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚ Ğ’Ğ¡Ğ• Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ñ‹ Ğ¿Ğ¾ Ğ·Ğ°ĞºĞ¾Ğ½Ñƒ

Ğ¢Ğ Ğ•Ğ‘ĞĞ’ĞĞĞ˜Ğ¯ Ğš ĞšĞĞ–Ğ”ĞĞœĞ£ Ğ¢Ğ•ĞšĞ¡Ğ¢Ğ£:
1. Ğ®Ñ€Ğ¸Ğ´Ğ¸Ñ‡ĞµÑĞºĞ¸ ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ñ‹Ğ¹ (Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞµĞ½ Ñ‡ĞµÑ€ĞµĞ· Vector Store!)
2. Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚ Ğ¢ĞĞ§ĞĞ£Ğ® ÑÑÑ‹Ğ»ĞºÑƒ Ğ½Ğ° ÑÑ‚Ğ°Ñ‚ÑŒÑ Ğ¸ Ñ‡Ğ°ÑÑ‚ÑŒ Ğ·Ğ°ĞºĞ¾Ğ½Ğ°
3. Ğ’ĞºĞ»ÑÑ‡Ğ°ĞµÑ‚ Ğ’Ğ¡Ğ• Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ñ‹ (ÑÑ€Ğ¾Ğº, ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ñ, Ñ€ĞµĞºĞ²Ğ¸Ğ·Ğ¸Ñ‚Ñ‹)
4. Ğ“Ğ¾Ñ‚Ğ¾Ğ² Ğº ĞºĞ¾Ğ¿Ğ¸Ğ¿Ğ°ÑÑ‚Ñƒ Ğ‘Ğ•Ğ— Ğ¿Ğ»ĞµĞ¹ÑÑ…Ğ¾Ğ»Ğ´ĞµÑ€Ğ¾Ğ² [ÑĞºĞ¾Ğ±ĞºĞ¸]
5. ĞŸĞ¾Ğ½ÑÑ‚Ğ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾ÑÑ‚Ñ‹Ğ¼ ÑĞ·Ñ‹ĞºĞ¾Ğ¼
6. Ğ£ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ ĞœĞ•Ğ¡Ğ¢Ğ Ğ²ÑÑ‚Ğ°Ğ²ĞºĞ¸ Ğ² Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚

ĞŸĞ Ğ˜ĞœĞ•Ğ Ğ« ĞŸĞ ĞĞ’Ğ˜Ğ›Ğ¬ĞĞ«Ğ¥ Ğ¢Ğ•ĞšĞ¡Ğ¢ĞĞ’ (Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ ĞºĞ°Ğº ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½):

Ğ”Ğ»Ñ ÑĞ¾Ğ³Ğ»Ğ°ÑĞ¸Ñ Ğ½Ğ° Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºÑƒ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (Ğ¤Ğ—-152):
"â˜ Ğ¯ ÑĞ¾Ğ³Ğ»Ğ°ÑĞµĞ½ Ğ½Ğ° Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºÑƒ Ğ¼Ğ¾Ğ¸Ñ… Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (Ğ¤Ğ˜Ğ, Ğ°Ğ´Ñ€ĞµÑ, Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½, email) ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸ĞµĞ¹ ĞĞĞ 'ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ', Ğ˜ĞĞ 1234567890, Ğ°Ğ´Ñ€ĞµÑ: Ğ³. ĞœĞ¾ÑĞºĞ²Ğ°, ÑƒĞ». ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ğ½Ğ°Ñ, Ğ´. 1 Ğ² Ñ†ĞµĞ»ÑÑ… Ğ¸ÑĞ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ Ğ´Ğ¾Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ° ĞºÑƒĞ¿Ğ»Ğ¸-Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶Ğ¸ Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¸ Ğ¤ĞµĞ´ĞµÑ€Ğ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ·Ğ°ĞºĞ¾Ğ½Ğ° Ğ¾Ñ‚ 27.07.2006 â„– 152-Ğ¤Ğ— 'Ğ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…', Ğ¡Ñ‚Ğ°Ñ‚ÑŒÑ 9, Ñ‡Ğ°ÑÑ‚ÑŒ 1. Ğ¡Ğ¾Ğ³Ğ»Ğ°ÑĞ¸Ğµ Ğ½Ğ° Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºÑƒ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ´Ğ¾Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ÑÑ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ñ ÑĞ¾Ğ³Ğ»Ğ°ÑĞ¸Ñ ÑÑƒĞ±ÑŠĞµĞºÑ‚Ğ° Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…."

Ğ”Ğ»Ñ Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚Ğ° Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ² Ğ½Ğ°Ğ´Ğ»ĞµĞ¶Ğ°Ñ‰ĞµĞ³Ğ¾ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ°:
"ĞŸĞ¾ĞºÑƒĞ¿Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ğ¿Ñ€Ğ°Ğ²Ğµ Ğ¾Ñ‚ĞºĞ°Ğ·Ğ°Ñ‚ÑŒÑÑ Ğ¾Ñ‚ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ° Ğ½Ğ°Ğ´Ğ»ĞµĞ¶Ğ°Ñ‰ĞµĞ³Ğ¾ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ° Ğ² Ñ‚ĞµÑ‡ĞµĞ½Ğ¸Ğµ 14 Ğ´Ğ½ĞµĞ¹ Ñ Ğ¼Ğ¾Ğ¼ĞµĞ½Ñ‚Ğ° Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ñ, Ğ·Ğ° Ğ¸ÑĞºĞ»ÑÑ‡ĞµĞ½Ğ¸ĞµĞ¼ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ² Ğ¿ĞµÑ€ĞµÑ‡Ğ¸ÑĞ»ĞµĞ½Ğ½Ñ‹Ñ… Ğ² ĞŸĞµÑ€ĞµÑ‡Ğ½Ğµ Ğ½ĞµĞ¿Ñ€Ğ¾Ğ´Ğ¾Ğ²Ğ¾Ğ»ÑŒÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ñ… Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ² Ğ½Ğ°Ğ´Ğ»ĞµĞ¶Ğ°Ñ‰ĞµĞ³Ğ¾ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ°, Ğ½Ğµ Ğ¿Ğ¾Ğ´Ğ»ĞµĞ¶Ğ°Ñ‰Ğ¸Ñ… Ğ¾Ğ±Ğ¼ĞµĞ½Ñƒ Ğ¸ Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚Ñƒ, ÑƒÑ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ½Ğ¾Ğ¼ ĞŸĞ¾ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸ĞµĞ¼ ĞŸÑ€Ğ°Ğ²Ğ¸Ñ‚ĞµĞ»ÑŒÑÑ‚Ğ²Ğ° Ğ Ğ¤ Ğ¾Ñ‚ 31.12.2020 â„– 2463, ÑĞ¾Ğ³Ğ»Ğ°ÑĞ½Ğ¾ Ğ¡Ñ‚Ğ°Ñ‚ÑŒĞµ 26.1 Ğ—Ğ°ĞºĞ¾Ğ½Ğ° Ğ Ğ¤ Ğ¾Ñ‚ 07.02.1992 â„– 2300-1 'Ğ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğµ Ğ¿Ñ€Ğ°Ğ² Ğ¿Ğ¾Ñ‚Ñ€ĞµĞ±Ğ¸Ñ‚ĞµĞ»ĞµĞ¹'."

Ğ”Ğ»Ñ Ğ³Ğ°Ñ€Ğ°Ğ½Ñ‚Ğ¸Ğ¹Ğ½Ğ¾Ğ³Ğ¾ ÑÑ€Ğ¾ĞºĞ°:
"Ğ“Ğ°Ñ€Ğ°Ğ½Ñ‚Ğ¸Ğ¹Ğ½Ñ‹Ğ¹ ÑÑ€Ğ¾Ğº ÑĞ¾ÑÑ‚Ğ°Ğ²Ğ»ÑĞµÑ‚ 12 Ğ¼ĞµÑÑÑ†ĞµĞ² Ñ Ğ¼Ğ¾Ğ¼ĞµĞ½Ñ‚Ğ° Ğ¿ĞµÑ€ĞµĞ´Ğ°Ñ‡Ğ¸ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ° Ğ¿Ğ¾ĞºÑƒĞ¿Ğ°Ñ‚ĞµĞ»Ñ. Ğ’ Ñ‚ĞµÑ‡ĞµĞ½Ğ¸Ğµ Ğ³Ğ°Ñ€Ğ°Ğ½Ñ‚Ğ¸Ğ¹Ğ½Ğ¾Ğ³Ğ¾ ÑÑ€Ğ¾ĞºĞ° Ğ¿Ğ¾ĞºÑƒĞ¿Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ğ¿Ñ€Ğ°Ğ²Ğµ Ğ¿Ñ€ĞµĞ´ÑŠÑĞ²Ğ¸Ñ‚ÑŒ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ, ÑĞ²ÑĞ·Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ Ğ½ĞµĞ´Ğ¾ÑÑ‚Ğ°Ñ‚ĞºĞ°Ğ¼Ğ¸ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ°, ÑĞ¾Ğ³Ğ»Ğ°ÑĞ½Ğ¾ Ğ¡Ñ‚Ğ°Ñ‚ÑŒĞµ 19 Ğ—Ğ°ĞºĞ¾Ğ½Ğ° Ğ Ğ¤ Ğ¾Ñ‚ 07.02.1992 â„– 2300-1 'Ğ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğµ Ğ¿Ñ€Ğ°Ğ² Ğ¿Ğ¾Ñ‚Ñ€ĞµĞ±Ğ¸Ñ‚ĞµĞ»ĞµĞ¹'."

Ğ”Ğ»Ñ Ñ€ĞµĞºĞ²Ğ¸Ğ·Ğ¸Ñ‚Ğ¾Ğ² Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ²Ñ†Ğ° (Ğ—Ğ¾Ğ—ĞŸĞŸ, Ğ¡Ñ‚Ğ°Ñ‚ÑŒÑ 10):
"ĞŸÑ€Ğ¾Ğ´Ğ°Ğ²ĞµÑ†: ĞĞĞ 'ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸'
Ğ˜ĞĞ: 1234567890
ĞĞ“Ğ Ğ: 1234567890123
Ğ®Ñ€Ğ¸Ğ´Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ°Ğ´Ñ€ĞµÑ: 123456, Ğ³. ĞœĞ¾ÑĞºĞ²Ğ°, ÑƒĞ». ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ğ½Ğ°Ñ, Ğ´. 1, Ğ¾Ñ„Ğ¸Ñ 101
Email: info@example.ru
Ğ¢ĞµĞ»ĞµÑ„Ğ¾Ğ½: +7 (495) 123-45-67"

ğŸ” Ğ˜Ğ¡ĞŸĞĞ›Ğ¬Ğ—Ğ£Ğ™ FILE SEARCH Ğ”Ğ›Ğ¯:
- ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸ Ñ‚Ğ¾Ñ‡Ğ½Ñ‹Ñ… Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ¸Ñ€Ğ¾Ğ²Ğ¾Ğº Ğ·Ğ°ĞºĞ¾Ğ½Ğ¾Ğ²
- ĞŸĞ¾Ğ¸ÑĞºĞ° Ğ°ĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ñ… Ñ€ĞµĞ´Ğ°ĞºÑ†Ğ¸Ğ¹ ÑÑ‚Ğ°Ñ‚ĞµĞ¹
- Ğ£Ñ‚Ğ¾Ñ‡Ğ½ĞµĞ½Ğ¸Ñ Ğ²ÑĞµÑ… Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ñ… ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²
- ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸ ÑÑ€Ğ¾ĞºĞ¾Ğ² Ğ¸ ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ğ¹

Ğ¤ĞĞ ĞœĞĞ¢ ĞĞ¢Ğ’Ğ•Ğ¢Ğ (Ğ¼Ğ°ÑÑĞ¸Ğ² Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ°Ñ‚ÑŒ ÑÑ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¶Ğµ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ¾Ğ², ÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ğ¹!):
{
  "readyTexts": [
    {
      "violationId": 1,
      "title": "Ğ˜Ğ¡ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞ˜Ğ•: ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ñ 1",
      "location": "Ğ’ Ñ€Ğ°Ğ·Ğ´ĞµĞ»Ğµ 'Ğ¡Ğ¾Ğ³Ğ»Ğ°ÑĞ¸Ğµ Ğ½Ğ° Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºÑƒ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…', Ğ¿Ğ¾ÑĞ»Ğµ Ñ„Ğ¾Ñ€Ğ¼Ñ‹ Ğ·Ğ°ĞºĞ°Ğ·Ğ°",
      "template": "ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ñ‹Ğ¹ Ñ‚ĞµĞºÑÑ‚ Ğ‘Ğ•Ğ— [Ğ¿Ğ»ĞµĞ¹ÑÑ…Ğ¾Ğ»Ğ´ĞµÑ€Ğ¾Ğ²], Ñ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğ¼Ğ¸ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸ÑĞ¼Ğ¸",
      "whyWorks": "Ğ¡Ğ¾Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ÑƒĞµÑ‚ Ğ¤Ğ—-152, Ğ¡Ñ‚Ğ°Ñ‚ÑŒÑ 9, Ñ‡Ğ°ÑÑ‚ÑŒ 1. Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚ Ğ²ÑĞµ Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ñ‹: Ñ†ĞµĞ»ÑŒ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸, Ğ¿ĞµÑ€ĞµÑ‡ĞµĞ½ÑŒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…, Ñ€ĞµĞºĞ²Ğ¸Ğ·Ğ¸Ñ‚Ñ‹ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€Ğ°."
    },
    {
      "violationId": 2,
      "title": "Ğ˜Ğ¡ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞ˜Ğ•: ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ñ 2",
      "location": "Ğ’ Ñ€Ğ°Ğ·Ğ´ĞµĞ»Ğµ 'Ğ£ÑĞ»Ğ¾Ğ²Ğ¸Ñ Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚Ğ°'",
      "template": "Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ñ‹Ğ¹ Ñ‚ĞµĞºÑÑ‚ Ğ´Ğ»Ñ Ğ²Ñ‚Ğ¾Ñ€Ğ¾Ğ³Ğ¾ Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ñ...",
      "whyWorks": "ĞĞ±ÑŠÑÑĞ½ĞµĞ½Ğ¸Ğµ ÑĞ¾ ÑÑÑ‹Ğ»ĞºĞ¾Ğ¹ Ğ½Ğ° Ğ·Ğ°ĞºĞ¾Ğ½"
    }
    // ... Ğ¸ Ñ‚Ğ°Ğº Ğ´Ğ°Ğ»ĞµĞµ Ğ´Ğ»Ñ Ğ’Ğ¡Ğ•Ğ¥ Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ğ¹
  ]
}`;

// =============================================================================
// Ğ¤Ğ£ĞĞšĞ¦Ğ˜Ğ˜ Ğ ĞĞ‘ĞĞ¢Ğ« Ğ¡ OPENAI ASSISTANT
// =============================================================================

async function runAssistant(userMessage, instructions) {
  try {
    // Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµĞ¼ thread
    const thread = await openai.beta.threads.create();
    
    // Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ
    await openai.beta.threads.messages.create(thread.id, {
      role: "user",
      content: userMessage
    });
    
    // Ğ—Ğ°Ğ¿ÑƒÑĞºĞ°ĞµĞ¼ assistant Ñ ĞºĞ°ÑÑ‚Ğ¾Ğ¼Ğ½Ñ‹Ğ¼Ğ¸ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸ÑĞ¼Ğ¸
    const run = await openai.beta.threads.runs.create(thread.id, {
      assistant_id: ASSISTANT_ID,
      additional_instructions: instructions
    });
    
    // Ğ–Ğ´ĞµĞ¼ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¸Ñ
    let runStatus = await openai.beta.threads.runs.retrieve(thread.id, run.id);
    
    while (runStatus.status !== 'completed') {
      if (runStatus.status === 'failed' || runStatus.status === 'cancelled') {
        throw new Error(`Run ${runStatus.status}: ${runStatus.last_error?.message || 'Unknown error'}`);
      }
      
      await new Promise(resolve => setTimeout(resolve, 1000));
      runStatus = await openai.beta.threads.runs.retrieve(thread.id, run.id);
    }
    
    // ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ Ğ¾Ñ‚Ğ²ĞµÑ‚
    const messages = await openai.beta.threads.messages.list(thread.id);
    const lastMessage = messages.data[0];
    
    if (lastMessage.role === 'assistant') {
      const content = lastMessage.content[0];
      if (content.type === 'text') {
        return content.text.value;
      }
    }
    
    throw new Error('No response from assistant');
    
  } catch (error) {
    console.error('Error running assistant:', error);
    throw error;
  }
}

// ĞŸĞ°Ñ€ÑĞ¸Ğ½Ğ³ JSON Ğ¸Ğ· Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ° (Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹Ñ‚ÑŒ Ğ² markdown Ğ±Ğ»Ğ¾ĞºĞ°Ñ…)
function parseJSON(text) {
  try {
    // Ğ£Ğ±Ğ¸Ñ€Ğ°ĞµĞ¼ markdown code blocks
    let cleaned = text.replace(/```json\n?/g, '').replace(/```\n?/g, '').trim();
    
    // ĞŸÑ€Ğ¾Ğ±ÑƒĞµĞ¼ Ñ€Ğ°ÑĞ¿Ğ°Ñ€ÑĞ¸Ñ‚ÑŒ Ğ½Ğ°Ğ¿Ñ€ÑĞ¼ÑƒÑ
    try {
      return JSON.parse(cleaned);
    } catch (e) {
      // Ğ•ÑĞ»Ğ¸ Ğ½Ğµ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ğ»Ğ¾ÑÑŒ, Ğ¸Ñ‰ĞµĞ¼ JSON Ğ² Ñ‚ĞµĞºÑÑ‚Ğµ
      const jsonMatch = cleaned.match(/\{[\s\S]*\}/);
      if (jsonMatch) {
        return JSON.parse(jsonMatch[0]);
      }
      throw e;
    }
  } catch (error) {
    console.error('Failed to parse JSON. Text was:', text.substring(0, 500));
    throw new Error('Invalid JSON response from AI: ' + error.message);
  }
}

// =============================================================================
// 3-Ğ­Ğ¢ĞĞŸĞĞĞ¯ Ğ’Ğ ĞĞ–Ğ”Ğ•Ğ‘ĞĞĞ¯ ĞŸĞ ĞĞ’Ğ•Ğ ĞšĞ
// =============================================================================

async function hostileAnalysis(documentText) {
  console.log('ğŸ”´ Ğ­Ğ¢ĞĞŸ 1: Ğ˜Ğ½ÑĞ¿ĞµĞºÑ‚Ğ¾Ñ€ Ğ¸Ñ‰ĞµÑ‚ Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ñ...');
  
  const step1Response = await runAssistant(
    `ĞŸÑ€Ğ¾Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞ¹ ÑÑ‚Ğ¾Ñ‚ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚:\n\n${documentText}`,
    STEP1_INSPECTOR
  );
  
  const step1Data = parseJSON(step1Response);
  console.log(`ĞĞ°Ğ¹Ğ´ĞµĞ½Ğ¾ Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ğ¹: ${step1Data.violations.length}`);
  
  console.log('âš–ï¸ Ğ­Ğ¢ĞĞŸ 2: ĞĞ´Ğ²Ğ¾ĞºĞ°Ñ‚ Ğ¸Ñ‰ĞµÑ‚ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ñƒ...');
  
  const step2Response = await runAssistant(
    `ĞšĞĞĞ¢Ğ•ĞšĞ¡Ğ¢: ${JSON.stringify(step1Data.context)}\n\nĞĞ‘Ğ’Ğ˜ĞĞ•ĞĞ˜Ğ¯: ${JSON.stringify(step1Data.violations)}`,
    STEP2_LAWYER
  );
  
  const step2Data = parseJSON(step2Response);
  console.log('Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ¿Ğ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ»ĞµĞ½Ğ°');
  
  console.log('âš”ï¸ Ğ­Ğ¢ĞĞŸ 3: Ğ¡ÑƒĞ´ÑŒÑ Ğ²Ñ‹Ğ½Ğ¾ÑĞ¸Ñ‚ Ğ²ĞµÑ€Ğ´Ğ¸ĞºÑ‚...');
  
  const step3Response = await runAssistant(
    `ĞšĞĞĞ¢Ğ•ĞšĞ¡Ğ¢: ${JSON.stringify(step1Data.context)}\n\nĞĞ‘Ğ’Ğ˜ĞĞ•ĞĞ˜Ğ¯: ${JSON.stringify(step1Data.violations)}\n\nĞ—ĞĞ©Ğ˜Ğ¢Ğ: ${JSON.stringify(step2Data.defenses)}`,
    STEP3_JUDGE
  );
  
  const verdict = parseJSON(step3Response);
  console.log(`âœ… ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¾ Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ğ¹: ${verdict.confirmedViolations.length}`);
  
  // Ğ”Ğ•Ğ¢ĞĞ›Ğ¬ĞĞĞ• Ğ›ĞĞ“Ğ˜Ğ ĞĞ’ĞĞĞ˜Ğ• Ğ´Ğ»Ñ Ğ¾Ñ‚Ğ»Ğ°Ğ´ĞºĞ¸
  if (verdict.confirmedViolations.length > 0) {
    console.log('\nğŸ” Ğ¡Ğ¢Ğ Ğ£ĞšĞ¢Ğ£Ğ Ğ ĞŸĞ•Ğ Ğ’ĞĞ“Ğ ĞĞĞ Ğ£Ğ¨Ğ•ĞĞ˜Ğ¯:');
    console.log(JSON.stringify(verdict.confirmedViolations[0], null, 2));
    console.log('\nĞ”Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ğµ Ğ¿Ğ¾Ğ»Ñ:', Object.keys(verdict.confirmedViolations[0]).join(', '));
  }
  
  return {
    context: step1Data.context,
    verdict: verdict
  };
}

// Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ñ‹Ñ… Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ² (Ğ¿Ñ€ĞµĞ¼Ğ¸ÑƒĞ¼)
async function generatePremiumTexts(violations) {
  console.log('ğŸ’ Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ñ‹Ñ… Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ²...');
  
  const response = await runAssistant(
    `ĞĞĞ Ğ£Ğ¨Ğ•ĞĞ˜Ğ¯: ${JSON.stringify(violations)}`,
    PREMIUM_GENERATOR
  );
  
  return parseJSON(response);
}

// =============================================================================
// ĞŸĞĞ Ğ¡Ğ˜ĞĞ“ Ğ¡ĞĞ™Ğ¢ĞĞ’
// =============================================================================

function cleanText(text) {
  return text
    .replace(/[\u0000-\u0008\u000B-\u000C\u000E-\u001F\u007F]/g, '')
    .replace(/[\u2028\u2029]/g, ' ')
    .replace(/\r\n/g, '\n')
    .replace(/\r/g, '\n')
    .trim();
}

async function fetchWebsiteContent(url) {
  return new Promise((resolve, reject) => {
    if (!url.startsWith('http://') && !url.startsWith('https://')) {
      url = 'https://' + url;
    }

    const protocol = url.startsWith('https') ? https : http;
    
    const options = {
      headers: {
        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'
      }
    };
    
    protocol.get(url, options, (res) => {
      let data = '';
      
      if (res.statusCode >= 300 && res.statusCode < 400 && res.headers.location) {
        return fetchWebsiteContent(res.headers.location).then(resolve).catch(reject);
      }
      
      res.on('data', (chunk) => {
        data += chunk;
      });
      
      res.on('end', () => {
        const text = data
          .replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi, '')
          .replace(/<style\b[^<]*(?:(?!<\/style>)<[^<]*)*<\/style>/gi, '')
          .replace(/<[^>]+>/g, ' ')
          .replace(/\s+/g, ' ')
          .trim();
        
        const sections = [];
        
        const offerMatch = text.match(/.{0,300}(Ğ¾Ñ„ĞµÑ€Ñ‚Ğ°|Ğ¿ÑƒĞ±Ğ»Ğ¸Ñ‡Ğ½Ğ°Ñ Ğ¾Ñ„ĞµÑ€Ñ‚Ğ°|Ğ´Ğ¾Ğ³Ğ¾Ğ²Ğ¾Ñ€|Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ¾Ğµ ÑĞ¾Ğ³Ğ»Ğ°ÑˆĞµĞ½Ğ¸Ğµ).{0,3000}/i);
        if (offerMatch) sections.push('ĞĞ¤Ğ•Ğ Ğ¢Ğ:\n' + offerMatch[0]);
        
        const privacyMatch = text.match(/.{0,300}(Ğ¿Ğ¾Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ° ĞºĞ¾Ğ½Ñ„Ğ¸Ğ´ĞµĞ½Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸|Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ|Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…).{0,3000}/i);
        if (privacyMatch) sections.push('\n\nĞŸĞĞ›Ğ˜Ğ¢Ğ˜ĞšĞ:\n' + privacyMatch[0]);
        
        const returnMatch = text.match(/.{0,300}(Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚|Ğ¾Ğ±Ğ¼ĞµĞ½|Ğ³Ğ°Ñ€Ğ°Ğ½Ñ‚Ğ¸Ñ).{0,1500}/i);
        if (returnMatch) sections.push('\n\nĞ’ĞĞ—Ğ’Ğ ĞĞ¢:\n' + returnMatch[0]);
        
        if (sections.length > 0) {
          resolve(cleanText(sections.join('\n')));
        } else {
          resolve(cleanText('Ğ¡ĞĞ”Ğ•Ğ Ğ–Ğ˜ĞœĞĞ•:\n' + text.substring(0, 4000)));
        }
      });
    }).on('error', (err) => {
      reject(err);
    });
  });
}

// =============================================================================
// Ğ¤ĞĞ ĞœĞĞ¢Ğ˜Ğ ĞĞ’ĞĞĞ˜Ğ• ĞĞ¢Ğ§Ğ•Ğ¢ĞĞ’
// =============================================================================

// =============================================================================
// Ğ ĞĞ¡Ğ§ĞĞ¢ Ğ¨Ğ¢Ğ ĞĞ¤ĞĞ’ (ĞĞ BACKEND, ĞĞ• Ğ”ĞĞ’Ğ•Ğ Ğ¯Ğ•Ğœ AI!)
// =============================================================================

// Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ Ğ¿Ğ°Ñ€ÑĞ¸Ğ½Ğ³Ğ° ÑˆÑ‚Ñ€Ğ°Ñ„Ğ° Ğ¸Ğ· ÑÑ‚Ñ€Ğ¾ĞºĞ¸
// =============================================================================
// Ğ¤Ğ£ĞĞšĞ¦Ğ˜Ğ˜ Ğ ĞĞ‘ĞĞ¢Ğ« Ğ¡Ğ Ğ¨Ğ¢Ğ ĞĞ¤ĞĞœĞ˜
// =============================================================================

// ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑˆÑ‚Ñ€Ğ°Ñ„ Ğ¸Ğ· Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ Ğ¿Ğ¾ Ğ·Ğ°ĞºĞ¾Ğ½Ñƒ Ğ¸ Ñ‚Ğ¸Ğ¿Ñƒ Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ñ
function getFineFromTable(law, violationType, violationTitle) {
  console.log(`ğŸ” Ğ˜Ñ‰Ñƒ ÑˆÑ‚Ñ€Ğ°Ñ„ Ğ´Ğ»Ñ: Ğ·Ğ°ĞºĞ¾Ğ½="${law}", Ñ‚Ğ¸Ğ¿="${violationType}", title="${violationTitle}"`);
  
  // ĞĞ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·ÑƒĞµĞ¼ Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ·Ğ°ĞºĞ¾Ğ½Ğ°
  let normalizedLaw = law;
  if (law.includes('152') || law.toLowerCase().includes('Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»ÑŒĞ½')) {
    normalizedLaw = 'Ğ¤Ğ—-152';
  } else if (law.includes('Ğ—Ğ¾Ğ—ĞŸĞŸ') || law.toLowerCase().includes('Ğ¿Ğ¾Ñ‚Ñ€ĞµĞ±Ğ¸Ñ‚ĞµĞ»')) {
    normalizedLaw = 'Ğ—Ğ¾Ğ—ĞŸĞŸ';
  } else if (law.includes('38') || law.toLowerCase().includes('Ñ€ĞµĞºĞ»Ğ°Ğ¼')) {
    normalizedLaw = 'Ğ¤Ğ—-38';
  }
  
  const lawFines = FINES_TABLE[normalizedLaw];
  if (!lawFines) {
    console.log(`âš ï¸ Ğ—Ğ°ĞºĞ¾Ğ½ "${normalizedLaw}" Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½ Ğ² Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğµ, Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑ Ğ´ĞµÑ„Ğ¾Ğ»Ñ‚`);
    return { ip: { min: 10000, max: 50000 }, ooo: { min: 100000, max: 500000 } };
  }
  
  // Ğ˜Ñ‰ĞµĞ¼ Ğ¿Ğ¾ Ğ²ÑĞµĞ¼ Ñ‚ĞµĞºÑÑ‚Ğ°Ğ¼ (Ñ‚Ğ¸Ğ¿, title, Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ)
  const searchText = `${violationType} ${violationTitle}`.toLowerCase();
  const violationKey = Object.keys(lawFines).find(key => 
    searchText.includes(key.toLowerCase()) || key.toLowerCase().includes(violationType.toLowerCase())
  );
  
  const fine = lawFines[violationKey] || lawFines['default'];
  console.log(`âœ… ĞĞ°Ğ¹Ğ´ĞµĞ½ ÑˆÑ‚Ñ€Ğ°Ñ„:`, fine);
  
  return fine;
}

// Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ Ğ¿Ğ°Ñ€ÑĞ¸Ğ½Ğ³Ğ° ÑˆÑ‚Ñ€Ğ°Ñ„Ğ° Ğ¸Ğ· ÑÑ‚Ñ€Ğ¾ĞºĞ¸ (Ğ Ğ•Ğ—Ğ•Ğ Ğ’ĞĞĞ¯, ĞµÑĞ»Ğ¸ AI Ğ²ĞµÑ€Ğ½Ñ‘Ñ‚ ÑˆÑ‚Ñ€Ğ°Ñ„Ñ‹)
function parseFine(fineStr) {
  // "Ğ¾Ñ‚ 10,000â‚½ Ğ´Ğ¾ 50,000â‚½" Ğ¸Ğ»Ğ¸ "Ğ´Ğ¾ 50,000â‚½"
  if (!fineStr) return { min: 0, max: 0 };
  
  const numbers = fineStr.match(/[\d,]+/g);
  if (!numbers) return { min: 0, max: 0 };
  
  const parsed = numbers.map(n => parseInt(n.replace(/,/g, '')));
  
  if (parsed.length === 1) {
    // "Ğ´Ğ¾ 50,000â‚½"
    return { min: 0, max: parsed[0] };
  } else if (parsed.length >= 2) {
    // "Ğ¾Ñ‚ 10,000â‚½ Ğ´Ğ¾ 50,000â‚½"
    return { min: parsed[0], max: parsed[1] };
  }
  
  return { min: 0, max: 0 };
}

// Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚Ğ° ÑÑƒĞ¼Ğ¼Ğ°Ñ€Ğ½Ñ‹Ñ… ÑˆÑ‚Ñ€Ğ°Ñ„Ğ¾Ğ²
function calculateTotalRisk(violations) {
  let totalMinIP = 0;
  let totalMaxIP = 0;
  let totalMinOOO = 0;
  let totalMaxOOO = 0;
  
  console.log('ğŸ“Š Ğ Ğ°ÑÑ‡Ñ‘Ñ‚ ÑÑƒĞ¼Ğ¼Ğ°Ñ€Ğ½Ñ‹Ñ… ÑˆÑ‚Ñ€Ğ°Ñ„Ğ¾Ğ²:');
  
  violations.forEach((v, index) => {
    // Ğ˜Ğ¡ĞŸĞĞ›Ğ¬Ğ—Ğ£Ğ•Ğœ Ğ¢ĞĞ‘Ğ›Ğ˜Ğ¦Ğ£ Ğ¨Ğ¢Ğ ĞĞ¤ĞĞ’ Ğ²Ğ¼ĞµÑÑ‚Ğ¾ Ğ¿Ğ°Ñ€ÑĞ¸Ğ½Ğ³Ğ° AI Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°
    const fine = getFineFromTable(
      v.law || '', 
      v.type || v.category || '', 
      v.title || v.description || ''
    );
    
    console.log(`  ĞĞ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ğµ ${index + 1}: ${v.title || v.description}`);
    console.log(`    Ğ—Ğ°ĞºĞ¾Ğ½: ${v.law}`);
    console.log(`    Ğ˜ĞŸ: Ğ¾Ñ‚ ${fine.ip.min} Ğ´Ğ¾ ${fine.ip.max}`);
    console.log(`    ĞĞĞ: Ğ¾Ñ‚ ${fine.ooo.min} Ğ´Ğ¾ ${fine.ooo.max}`);
    
    totalMinIP += fine.ip.min;
    totalMaxIP += fine.ip.max;
    totalMinOOO += fine.ooo.min;
    totalMaxOOO += fine.ooo.max;
  });
  
  console.log(`  ğŸ’° Ğ˜Ğ¢ĞĞ“Ğ:`);
  console.log(`    Ğ˜ĞŸ: Ğ¾Ñ‚ ${totalMinIP} Ğ´Ğ¾ ${totalMaxIP}`);
  console.log(`    ĞĞĞ: Ğ¾Ñ‚ ${totalMinOOO} Ğ´Ğ¾ ${totalMaxOOO}`);
  
  const formatNumber = (num) => {
    return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
  };
  
  return {
    ip: `Ğ¾Ñ‚ ${formatNumber(totalMinIP)}â‚½ Ğ´Ğ¾ ${formatNumber(totalMaxIP)}â‚½`,
    ooo: `Ğ¾Ñ‚ ${formatNumber(totalMinOOO)}â‚½ Ğ´Ğ¾ ${formatNumber(totalMaxOOO)}â‚½`
  };
}

// =============================================================================
// Ğ¤ĞĞ ĞœĞĞ¢Ğ˜Ğ ĞĞ’ĞĞĞ˜Ğ• ĞĞ¢Ğ§Ğ•Ğ¢ĞĞ’
// =============================================================================

function formatFreeReport(analysis) {
  const violations = analysis.verdict.confirmedViolations;
  
  const critical = violations.filter(v => v.category === 'ğŸ”´').length;
  const high = violations.filter(v => v.category === 'ğŸŸ¡').length;
  const medium = violations.filter(v => v.category === 'ğŸŸ¢').length;
  
  // Ğ¡Ğ§Ğ˜Ğ¢ĞĞ•Ğœ Ğ¡Ğ£ĞœĞœĞ« Ğ¡ĞĞœĞ˜ ĞĞ BACKEND! ĞĞ• Ğ”ĞĞ’Ğ•Ğ Ğ¯Ğ•Ğœ AI Ğ¡ ĞœĞĞ¢Ğ•ĞœĞĞ¢Ğ˜ĞšĞĞ™!
  const totalRisk = calculateTotalRisk(violations);
  
  return {
    found: violations.length,
    riskIP: totalRisk.ip,
    riskOOO: totalRisk.ooo,
    level: critical > 0 ? 'ĞšĞ Ğ˜Ğ¢Ğ˜Ğ§Ğ•Ğ¡ĞšĞ˜Ğ™' : high > 0 ? 'Ğ’Ğ«Ğ¡ĞĞšĞ˜Ğ™' : 'Ğ¡Ğ Ğ•Ğ”ĞĞ˜Ğ™',
    breakdown: {
      critical,
      high,
      medium
    }
  };
}

function formatBasicReport(analysis) {
  console.log('\nğŸ“‹ Ğ¤ĞĞ ĞœĞĞ¢Ğ˜Ğ ĞĞ’ĞĞĞ˜Ğ• Ğ‘ĞĞ—ĞĞ’ĞĞ“Ğ ĞĞ¢Ğ§ĞĞ¢Ğ...');
  console.log(`ĞĞ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ğ¹ Ğ´Ğ»Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸: ${analysis.verdict.confirmedViolations.length}`);
  
  // Ğ¡Ğ§Ğ˜Ğ¢ĞĞ•Ğœ Ğ¡Ğ£ĞœĞœĞ« Ğ¡ĞĞœĞ˜ ĞĞ BACKEND!
  const totalRisk = calculateTotalRisk(analysis.verdict.confirmedViolations);
  
  // Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ ÑˆÑ‚Ñ€Ğ°Ñ„Ñ‹ Ğ¸Ğ· Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ Ğ² ĞºĞ°Ğ¶Ğ´Ğ¾Ğµ Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ğµ
  const violationsWithFines = analysis.verdict.confirmedViolations.map((v, index) => {
    console.log(`\n  ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ñ ${index + 1}:`);
    console.log(`    law: "${v.law}"`);
    console.log(`    type: "${v.type}"`);
    console.log(`    category: "${v.category}"`);
    console.log(`    title: "${v.title}" (typeof: ${typeof v.title})`);
    console.log(`    description: "${v.description}" (typeof: ${typeof v.description})`);
    
    // Ğ¤Ğ˜ĞšĞ¡: Fallback ĞµÑĞ»Ğ¸ AI Ğ½Ğµ Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ğ» title Ğ¸Ğ»Ğ¸ Ğ²ĞµÑ€Ğ½ÑƒĞ» ÑÑ‚Ñ€Ğ¾ĞºÑƒ "undefined"
    const isValidString = (str) => str && str !== "undefined" && str.trim() !== "";
    
    const displayTitle = isValidString(v.title) 
      ? v.title 
      : isValidString(v.description)
        ? v.description
        : 'ĞĞ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ğµ Ğ·Ğ°ĞºĞ¾Ğ½Ğ°';
    
    const displayDescription = isValidString(v.description) 
      ? v.description 
      : isValidString(v.title)
        ? v.title
        : '';
    
    console.log(`    ğŸ”§ ĞŸĞ¾ÑĞ»Ğµ fallback: title="${displayTitle}", description="${displayDescription}"`);
    
    const fine = getFineFromTable(
      v.law || '', 
      v.type || v.category || '', 
      displayTitle
    );
    
    const formatNumber = (num) => num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
    
    const result = {
      ...v,
      title: displayTitle,  // Ğ“Ğ°Ñ€Ğ°Ğ½Ñ‚Ğ¸Ñ€ÑƒĞµĞ¼ Ñ‡Ñ‚Ğ¾ title Ğ²ÑĞµĞ³Ğ´Ğ° ĞµÑÑ‚ÑŒ
      description: displayDescription,
      fineIP: `Ğ¾Ñ‚ ${formatNumber(fine.ip.min)}â‚½ Ğ´Ğ¾ ${formatNumber(fine.ip.max)}â‚½`,
      fineOOO: `Ğ¾Ñ‚ ${formatNumber(fine.ooo.min)}â‚½ Ğ´Ğ¾ ${formatNumber(fine.ooo.max)}â‚½`
    };
    
    console.log(`    âœ… Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ñ‹ ÑˆÑ‚Ñ€Ğ°Ñ„Ñ‹: Ğ˜ĞŸ=${result.fineIP}, ĞĞĞ=${result.fineOOO}`);
    
    return result;
  });
  
  console.log(`\nğŸ“Š Ğ˜Ñ‚Ğ¾Ğ³Ğ¾Ğ²Ñ‹Ğµ Ñ€Ğ¸ÑĞºĞ¸: Ğ˜ĞŸ=${totalRisk.ip}, ĞĞĞ=${totalRisk.ooo}\n`);
  
  return {
    context: analysis.context,
    violations: violationsWithFines,
    rejected: analysis.verdict.rejectedViolations,
    totalRiskIP: totalRisk.ip,
    totalRiskOOO: totalRisk.ooo,
    timestamp: new Date().toISOString(),
    version: 'AI Ğ®Ñ€Ğ¸ÑÑ‚ Ğ Ğ¤ v2.0'
  };
}

async function formatPremiumReport(analysis) {
  try {
    const violationsCount = analysis.verdict.confirmedViolations.length;
    console.log(`ğŸ“Š ĞĞ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ğ¹ Ğ´Ğ»Ñ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸: ${violationsCount}`);
    
    const premiumTexts = await generatePremiumTexts(analysis.verdict.confirmedViolations);
    
    console.log(`âœ… Ğ¡Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ñ‹Ñ… Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ²: ${premiumTexts.readyTexts?.length || 0}`);
    
    if (!premiumTexts.readyTexts || premiumTexts.readyTexts.length !== violationsCount) {
      console.warn(`âš ï¸ Ğ’ĞĞ˜ĞœĞĞĞ˜Ğ•: ĞĞ¶Ğ¸Ğ´Ğ°Ğ»Ğ¾ÑÑŒ ${violationsCount} Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ², Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¾ ${premiumTexts.readyTexts?.length || 0}`);
    }
    
    // Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ readyText Ğº ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¼Ñƒ Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ñ
    const violationsWithTexts = analysis.verdict.confirmedViolations.map((v, i) => {
      const readyTextObj = premiumTexts.readyTexts?.[i];
      
      if (!readyTextObj) {
        console.warn(`âš ï¸ ĞĞµÑ‚ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ñ‚ĞµĞºÑÑ‚Ğ° Ğ´Ğ»Ñ Ğ½Ğ°Ñ€ÑƒÑˆĞµĞ½Ğ¸Ñ ${i + 1}: ${v.title}`);
      }
      
      return {
        ...v,
        readyText: typeof readyTextObj === 'object' ? readyTextObj.template : readyTextObj,
        insertLocation: typeof readyTextObj === 'object' ? readyTextObj.location : null
      };
    });
    
    return {
      ...formatBasicReport(analysis),
      violations: violationsWithTexts
    };
  } catch (error) {
    console.error('âš ï¸ ĞÑˆĞ¸Ğ±ĞºĞ° Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ñ‹Ñ… Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ²:', error.message);
    
    // Fallback: Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµĞ¼ Ğ±Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚ Ğ±ĞµĞ· Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ñ‹Ñ… Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ²
    return formatBasicReport(analysis);
  }
}

// =============================================================================
// ENDPOINTS
// =============================================================================

app.get('/health', (req, res) => {
  res.json({
    status: 'ok',
    version: '2.0.0',
    assistantConfigured: !!ASSISTANT_ID,
    timestamp: new Date().toISOString()
  });
});

// Ğ‘ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ğ°Ñ ÑĞºÑĞ¿Ñ€ĞµÑÑ-Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ°
app.post('/api/check-free', async (req, res) => {
  try {
    let { text } = req.body;
    
    if (!text) {
      return res.status(400).json({ error: 'Ğ¢ĞµĞºÑÑ‚ Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ĞµĞ½' });
    }
    
    console.log('[FREE] ĞĞ°Ñ‡Ğ°Ğ»Ğ¾ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸');
    
    // ĞŸĞ°Ñ€ÑĞ¸Ğ½Ğ³ ÑĞ°Ğ¹Ñ‚Ğ° ĞµÑĞ»Ğ¸ Ğ½ÑƒĞ¶Ğ½Ğ¾
    if (text.startsWith('URL: ')) {
      const url = text.replace('URL: ', '').trim();
      text = await fetchWebsiteContent(url);
    }
    
    text = cleanText(text);
    
    // ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·
    const analysis = await hostileAnalysis(text);
    
    // Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµĞ¼ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ĞºÑ€Ğ°Ñ‚ĞºÑƒÑ Ğ²ĞµÑ€ÑĞ¸Ñ
    const freeReport = formatFreeReport(analysis);
    
    res.json({
      success: true,
      tier: 'free',
      data: freeReport
    });
    
  } catch (error) {
    console.error('[FREE] Error:', error);
    res.status(500).json({
      success: false,
      error: error.message
    });
  }
});

// Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° (1,990â‚½)
app.post('/api/check-basic', async (req, res) => {
  try {
    let { text, paymentId } = req.body;
    
    if (!text) {
      return res.status(400).json({ error: 'Ğ¢ĞµĞºÑÑ‚ Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ĞµĞ½' });
    }
    
    // TODO: ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñ‹ Ñ‡ĞµÑ€ĞµĞ· paymentId
    
    console.log('[BASIC] ĞĞ°Ñ‡Ğ°Ğ»Ğ¾ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸');
    
    if (text.startsWith('URL: ')) {
      const url = text.replace('URL: ', '').trim();
      text = await fetchWebsiteContent(url);
    }
    
    text = cleanText(text);
    
    const analysis = await hostileAnalysis(text);
    const basicReport = formatBasicReport(analysis);
    
    res.json({
      success: true,
      tier: 'basic',
      data: basicReport
    });
    
  } catch (error) {
    console.error('[BASIC] Error:', error);
    res.status(500).json({
      success: false,
      error: error.message
    });
  }
});

// ĞŸÑ€ĞµĞ¼Ğ¸ÑƒĞ¼ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° (2,790â‚½)
app.post('/api/check-premium', async (req, res) => {
  try {
    let { text, paymentId } = req.body;
    
    if (!text) {
      return res.status(400).json({ error: 'Ğ¢ĞµĞºÑÑ‚ Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ĞµĞ½' });
    }
    
    // TODO: ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñ‹ Ñ‡ĞµÑ€ĞµĞ· paymentId
    
    console.log('[PREMIUM] ĞĞ°Ñ‡Ğ°Ğ»Ğ¾ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸');
    
    if (text.startsWith('URL: ')) {
      const url = text.replace('URL: ', '').trim();
      text = await fetchWebsiteContent(url);
    }
    
    text = cleanText(text);
    
    const analysis = await hostileAnalysis(text);
    const premiumReport = await formatPremiumReport(analysis);
    
    res.json({
      success: true,
      tier: 'premium',
      data: premiumReport
    });
    
  } catch (error) {
    console.error('[PREMIUM] Error:', error);
    res.status(500).json({
      success: false,
      error: error.message
    });
  }
});

// =============================================================================
// Ğ—ĞĞŸĞ£Ğ¡Ğš
// =============================================================================

app.listen(PORT, () => {
  console.log(`ğŸš€ AI Lawyer API v2.0 Ğ½Ğ° Ğ¿Ğ¾Ñ€Ñ‚Ñƒ ${PORT}`);
  console.log(`ğŸ”‘ OpenAI API: ${process.env.OPENAI_API_KEY ? 'âœ…' : 'âŒ'}`);
  console.log(`ğŸ¤– Assistant ID: ${ASSISTANT_ID ? 'âœ… ' + ASSISTANT_ID : 'âŒ'}`);
  console.log(`âœ… Ğ’Ñ€Ğ°Ğ¶Ğ´ĞµĞ±Ğ½Ğ°Ñ 3-ÑÑ‚Ğ°Ğ¿Ğ½Ğ°Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ°!`);
});
